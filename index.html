<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analisi Climatica - Vercelli</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <style>
    :root {
      --main-color: #2c3e50;
      --accent-color: #3498db;
      --light-gray: #f4f4f4;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--light-gray);
      color: #333;
    }
    header {
      background: var(--main-color);
      color: white;
      padding: 20px 0;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    nav {
      background: #1c2833;
      display: flex;
      justify-content: center;
      padding: 10px 0;
    }
    nav a {
      color: white;
      margin: 0 15px;
      text-decoration: none;
      font-weight: bold;
    }
    nav a:hover {
      text-decoration: underline;
    }
    #map {
      height: 60vh;
    }
    .content {
      padding: 30px;
      max-width: 1000px;
      margin: auto;
    }
    h2 {
      color: var(--main-color);
      border-bottom: 2px solid var(--accent-color);
      padding-bottom: 5px;
    }
    .info-box, .info-box-socio {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      cursor: pointer;
      overflow: hidden; /* Hide content when not expanded */
    }
    .info-box ul, .info-box-socio ul {
      padding-left: 20px;
      list-style: none; /* Remove default list style for custom icon */
      margin-top: 15px;
    }
    .info-box ul li, .info-box-socio ul li {
      margin-bottom: 8px;
      line-height: 1.6em;
      display: none; /* Hidden by default, shown when expanded */
    }
    .info-box.expanded ul li, .info-box-socio.expanded ul li {
      display: list-item; /* Show when expanded */
    }
    .info-box i {
      margin-right: 6px;
      color: var(--accent-color);
    }
    .info-box-socio {
      background: #fff9e6;
      border-left: 6px solid #f39c12;
    }
    .chart {
      margin: 25px auto;
      text-align: center;
    }
    footer {
      background: #2c3e50;
      color: white;
      text-align: center;
      padding: 10px;
      font-size: 0.9em;
      margin-top: 40px;
    }
    /* Styles for graphs */
    .graphs-section {
      display: none; /* Hidden by default, shown when expanded */
      margin-top: 20px;
      border-top: 1px solid #eee;
      padding-top: 20px;
      text-align: center;
    }
    .info-box.expanded .graphs-section {
      display: block; /* Show when the info-box is expanded */
    }
    .graphs-section img {
      max-width: 100%;
      height: auto;
      margin-bottom: 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      cursor: pointer; /* Indicate that images are clickable */
    }
    .graphs-section h3 {
      color: var(--accent-color);
      margin-bottom: 10px;
      font-size: 1.1em;
    }
    /* Initial state for list items */
    .info-box.expanded ul li {
        display: list-item;
    }

    /* Modal (Lightbox) Styles */
    .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1000; /* Sit on top */
      padding-top: 60px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
    }

    /* Modal Content (image) */
    .modal-content {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
    }

    /* Caption of Modal Image */
    #caption {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
      text-align: center;
      color: #ccc;
      padding: 10px 0;
      height: 150px;
    }

    /* Add Animation - Zoom in the modal */
    .modal-content, #caption {
      animation-name: zoom;
      animation-duration: 0.6s;
    }

    @keyframes zoom {
      from {transform:scale(0)}
      to {transform:scale(1)}
    }

    /* The Close Button */
    .close-button {
      position: absolute;
      top: 15px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      transition: 0.3s;
    }

    .close-button:hover,
    .close-button:focus {
      color: #bbb;
      text-decoration: none;
      cursor: pointer;
    }

    /* 100% Image Width on Smaller Screens */
    @media only screen and (max-width: 700px){
      .modal-content {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Analisi Climatica e Impatti Socio-Economici - Vercelli</h1>
    <p>Uno sguardo integrato ai cambiamenti climatici sul territorio vercellese</p>
  </header>
  <nav>
    <a href="#minime">Temperature Minime</a>
    <a href="#massime">Temperature Massime</a>
    <a href="#precipitazioni">Precipitazioni</a>
    <a href="#impatto">Impatto Socio-Economico</a>
  </nav>

  <div id="map"></div>

  <div class="content">
    <div id="minime" class="info-box">
      <h2>üìä Temperature Minime</h2>
      <ul>
        <li><i class="fas fa-temperature-low"></i> <strong>TR</strong> ‚Äì Le notti tropicali (Tmin > 20¬∞C) sono in forte aumento. Questo fenomeno riduce il raffrescamento notturno, aumentando consumi energetici e stress termico sia per l'uomo che per le colture.</li>
        <li><i class="fas fa-snowflake"></i> <strong>TN10p</strong> ‚Äì La riduzione delle notti molto fredde (10¬∞ percentile) implica meno gelate, ma anche meno controllo naturale di parassiti, con conseguenze per la salute delle colture.</li>
        <li><i class="fas fa-moon"></i> <strong>TN90p</strong> ‚Äì L‚Äôincremento delle notti estremamente calde altera i ritmi fisiologici delle colture, anticipa le fasi vegetative e aumenta il consumo idrico.</li>
      </ul>
      <div class="graphs-section">
        <h3>Grafici Indici Temperature Minime</h3>
        <img src="Vercelli_94_24_tr_ANN.png" alt="Grafico TR - Notti Tropicali" class="enlargeable-graph">
        <img src="Vercelli_94_24_tn10p_ANN.png" alt="Grafico TN10p - Notti Fredde" class="enlargeable-graph">
        <img src="Vercelli_94_24_tn90p_ANN.png" alt="Grafico TN90p - Notti Calde Estive" class="enlargeable-graph">
      </div>
    </div>

    <div id="massime" class="info-box">
      <h2>üî• Temperature Massime</h2>
      <ul>
        <li><i class="fas fa-sun"></i> <strong>TX90p</strong> ‚Äì I giorni con Tmax > 90¬∞ percentile sono in crescita costante. Questo peggiora la vivibilit√† estiva e aumenta i costi per la climatizzazione e irrigazione.</li>
        <li><i class="fas fa-burn"></i> <strong>HWN / HWF</strong> ‚Äì Pi√π eventi di ondate di calore e pi√π lunghi: impatti sanitari e produttivi su tutta la comunit√†, con effetti cumulativi che amplificano il danno.</li>
        <li><i class="fas fa-thermometer-full"></i> <strong>TXGE30</strong> ‚Äì L‚Äôaumento dei giorni oltre i 30¬∞C crea condizioni di caldo continuo che compromettono le fasi critiche di crescita agricola.</li>
      </ul>
      <div class="graphs-section">
        <h3>Grafici Indici Temperature Massime</h3>
        <img src="Vercelli_94_24_tx90p_ANN.png" alt="Grafico TX90p - Giorni Caldi Estremi" class="enlargeable-graph">
        <img src="Vercelli_94_24_hwf_tx90_ANN.png" alt="Grafico HWF-Tx90 - Frequenza Ondate di Calore" class="enlargeable-graph">
        <img src="Vercelli_94_24_txge30_ANN.png" alt="Grafico TXGE30 - Giorni oltre 30¬∞C" class="enlargeable-graph">
      </div>
    </div>

    <div id="precipitazioni" class="info-box">
      <h2>üåßÔ∏è Precipitazioni</h2>
      <ul>
        <li><i class="fas fa-cloud-sun-rain"></i> <strong>CDD</strong> ‚Äì I periodi consecutivi senza pioggia superano spesso i 30 giorni: questo indebolisce la resilienza idrica delle colture e aumenta il rischio di perdite nel riso.</li>
        <li><i class="fas fa-water"></i> <strong>PRCPTOT</strong> ‚Äì Il totale annuale resta stabile, ma la distribuzione √® pi√π irregolare e meno utile all‚Äôagricoltura.</li>
        <li><i class="fas fa-cloud-showers-heavy"></i> <strong>R95p</strong> ‚Äì Le piogge intense e concentrate causano allagamenti, erosione e inefficienza nella ricarica idrica dei terreni agricoli.</li>
      </ul>
      <div class="graphs-section">
        <h3>Grafici Indici Precipitazioni</h3>
        <img src="Vercelli_94_24_cdd_ANN.png" alt="Grafico CDD - Giorni Secchi Consecutivi" class="enlargeable-graph">
        <img src="Vercelli_94_24_prcptot_ANN.png" alt="Grafico PRCPTOT - Precipitazioni Totali Annuali" class="enlargeable-graph">
        <img src="Vercelli_94_24_r95p_ANN.png" alt="Grafico R95p - Precipitazioni Estreme" class="enlargeable-graph">
      </div>
    </div>

    <div id="impatto" class="info-box-socio">
      <h2>üå± Impatti sul Tessuto Socio-Economico</h2>
      <p>Il cambiamento climatico sta gi√† alterando in modo tangibile l‚Äôequilibrio socio-economico del vercellese, in particolare per un‚Äôeconomia agricola fortemente specializzata.</p>
      <ul>
        <li><i class="fas fa-hand-holding-water"></i> Aumento dei costi irrigui e dipendenza da fonti idriche stabili.</li>
        <li><i class="fas fa-user-injured"></i> Popolazioni vulnerabili pi√π esposte agli effetti sanitari delle ondate di calore.</li>
        <li><i class="fas fa-industry"></i> Difficolt√† economiche per piccole aziende agricole nell‚Äôadattamento al clima.</li>
        <li><i class="fas fa-truck-loading"></i> Rischio di riduzione della produzione e perdita di competitivit√† nei mercati.</li>
        <li><i class="fas fa-city"></i> Necessit√† di pianificazione urbana e rurale resiliente al clima estremo.</li>
      </ul>
      <div class="chart">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Climate_change_graph_%282020%29.png/600px-Climate_change_graph_%282020%29.png" alt="Grafico cambiamento climatico" width="90%">
        <p style="font-size: 0.85em; color: #666;">Fonte: Wikimedia Commons ‚Äì Andamento globale delle temperature</p>
      </div>
    </div>
  </div>

  <footer>
    Progetto realizzato per analisi territoriale climatica | Master 2025 - Vercelli
  </footer>

  <button onclick="scrollToTop()" style="position: fixed; bottom: 20px; left: 20px; padding: 10px 15px; background-color: #3498db; color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.3); font-size: 16px;">
    ‚¨Ü Torna su
  </button>

  <div id="imageModal" class="modal">
    <span class="close-button">&times;</span>
    <img class="modal-content" id="img01">
    <div id="caption" class="caption"></div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([45.32, 8.42], 10);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const layers = [
      {
        name: "Zona Risaie",
        coords: [45.25, 8.52],
        descrizione: "Area vulnerabile alla siccit√† estiva (CDD) e alla gestione idrica complessa."
      },
      {
        name: "Area Urbana di Vercelli",
        coords: [45.32, 8.42],
        descrizione: "Popolazione esposta all'effetto isola di calore e ai picchi termici prolungati."
      },
      {
        name: "Zona Mais e Frumento",
        coords: [45.35, 8.30],
        descrizione: "A rischio di squilibri termici in primavera e piogge estreme dannose."
      }
    ];

    layers.forEach(zona => {
      L.circle(zona.coords, {
        color: '#e74c3c',
        fillColor: '#e74c3c',
        fillOpacity: 0.5,
        radius: 4000
      }).addTo(map).bindPopup(`<b>${zona.name}</b><br>${zona.descrizione}`);
    });

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Interactive functionality for info-boxes
    document.querySelectorAll('.info-box').forEach(box => {
      const listItems = box.querySelectorAll('ul li');
      const graphsSection = box.querySelector('.graphs-section');

      box.addEventListener('click', () => {
        const isExpanded = box.classList.toggle('expanded');

        listItems.forEach(li => {
          li.style.display = isExpanded ? 'list-item' : 'none';
        });

        if (graphsSection) {
          graphsSection.style.display = isExpanded ? 'block' : 'none';
        }
      });

      // Set initial state to expanded
      box.classList.add('expanded');
      listItems.forEach(li => li.style.display = 'list-item');
      if (graphsSection) {
        graphsSection.style.display = 'block';
      }
    });

    // Lightbox functionality
    const modal = document.getElementById("imageModal");
    const modalImg = document.getElementById("img01");
    const captionText = document.getElementById("caption");
    const closeButton = document.getElementsByClassName("close-button")[0];

    document.querySelectorAll('.graphs-section img').forEach(img => {
      img.addEventListener('click', function(event){
        event.stopPropagation(); // Prevent click from bubbling up to info-box and closing it
        modal.style.display = "block";
        modalImg.src = this.src;
        captionText.innerHTML = this.alt;
      });
    });

    // When the user clicks on <span> (x), close the modal
    closeButton.onclick = function() {
      modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the image, close it
    modal.addEventListener('click', function(event) {
      if (event.target === modal) {
        modal.style.display = "none";
      }
    });
  </script>
</body>
</html>
