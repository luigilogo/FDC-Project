<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climpact Vercelli - Analisi Climatica Avanzata</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Rubik:wght@500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <style>
        /* Variabili CSS: Palette Colori Sofisticata e Moderna */
        :root {
            --color-primary-dark: #222831; /* Blu/Nero Profondo */
            --color-secondary-dark: #393e46; /* Grigio Scuro Caldo */
            --color-accent-blue: #00ADB5; /* Blu Acqua Brillante (Accent) */
            --color-accent-green: #68B1A0; /* Verde Terroso Soft (Accent secondario) */
            --color-light-bg: #EEEEEE; /* Grigio Molto Chiaro / Bianco sporco */
            --color-text-dark: #333333; /* Testo Scuro per Leggibilità */
            --color-text-light: #555555; /* Testo Grigio per dettagli */
            --color-white: #FFFFFF; /* Bianco Puro */
            --color-border: #DCDCDC; /* Bordo Sottile */
            --color-gradient-start: #2c3e50; /* Gradiente Hero */
            --color-gradient-end: #007bff; /* Gradiente Hero */

            --shadow-subtle: 0 4px 15px rgba(0, 0, 0, 0.08); /* Ombra leggera e diffusa */
            --shadow-hover: 0 10px 30px rgba(0, 0, 0, 0.15); /* Ombra più pronunciata al hover */

            --transition-speed: 0.5s;
            --transition-ease: cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Ease-out-quad */

            --border-radius-lg: 25px; /* Bordi più arrotondati */
            --border-radius-md: 15px;
            --border-radius-sm: 8px;
        }

        /* Reset & Base Styling */
        html {
            scroll-behavior: smooth;
            overflow-y: scroll;
            scroll-snap-type: y proximity; /* Per uno scroll più guidato */
        }

        body {
            font-family: 'Lato', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-light-bg);
            color: var(--color-text-dark);
            line-height: 1.7; /* Migliorata leggibilità */
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        a {
            color: var(--color-accent-blue);
            text-decoration: none;
            transition: color var(--transition-speed) var(--transition-ease);
        }

        a:hover {
            color: var(--color-primary-dark);
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Rubik', sans-serif;
            color: var(--color-primary-dark);
            margin-top: 0;
            margin-bottom: 0.8em;
            font-weight: 700;
            line-height: 1.25;
            letter-spacing: -0.02em; /* Leggermente compattato */
        }

        h1 { font-size: clamp(3.5rem, 8vw, 5.8rem); font-weight: 800; } 
        h2 { font-size: clamp(2.8rem, 6vw, 4.5rem); font-weight: 700; }
        h3 { font-size: clamp(2.0rem, 4vw, 3.2rem); font-weight: 700; } 

        p {
            margin-bottom: 1em;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        /* Utility Classes */
        .container {
            max-width: 1280px; /* Larghezza interna */
            margin: 0 auto;
            padding: 0 40px; /* Padding laterale generoso */
        }

        .text-center { text-align: center; }

        /* Scroll Progress Indicator */
        #scroll-progress-indicator {
            position: fixed;
            top: 0;
            left: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--color-accent-blue) 0%, var(--color-accent-green) 100%);
            width: 0%;
            z-index: 1001;
            transition: width 0.1s linear;
            border-bottom-right-radius: 5px;
        }

        /* Header e Navigazione - Completamente Rinnovato */
        #main-header {
            background-color: transparent; /* Inizialmente trasparente */
            padding: 1.5rem 0;
            z-index: 1000;
            position: fixed;
            top: 0;
            width: 100%;
            transition: background-color var(--transition-speed) var(--transition-ease), 
                        box-shadow 0.4s ease, 
                        backdrop-filter 0.4s ease,
                        padding 0.3s ease;
            border-bottom: 1px solid transparent;
        }

        #main-header.scrolled {
            background-color: rgba(255, 255, 255, 0.98); /* Quasi opaco, leggermente trasparente */
            backdrop-filter: blur(15px); /* Effetto vetro smerigliato più pronunciato */
            -webkit-backdrop-filter: blur(15px);
            box-shadow: var(--shadow-subtle);
            border-bottom: 1px solid var(--color-border);
            padding: 1rem 0; /* Header leggermente più piccolo allo scroll */
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--color-white); /* Inizialmente bianco per contrasto con hero */
            display: flex;
            align-items: center;
            letter-spacing: -0.05em;
            user-select: none;
            transition: color var(--transition-speed) var(--transition-ease);
        }

        #main-header.scrolled .logo {
            color: var(--color-primary-dark); /* Cambia colore allo scroll */
        }

        .logo i {
            margin-right: 15px;
            font-size: 0.9em;
            color: var(--color-accent-blue); /* Icona sempre accentata */
            transition: transform 0.4s var(--transition-ease), color 0.4s var(--transition-ease);
        }

        .logo:hover i {
            transform: rotate(-10deg) scale(1.1);
            color: var(--color-accent-green);
        }

        nav ul {
            display: flex;
            margin: 0;
        }

        nav ul li {
            margin-left: 45px; /* Spazio aumentato tra i link */
        }

        .nav-link {
            font-weight: 600;
            font-size: 1.15rem;
            padding: 10px 0;
            position: relative;
            transition: all var(--transition-speed) var(--transition-ease);
            color: rgba(255, 255, 255, 0.85); /* Inizialmente bianco con trasparenza */
        }

        #main-header.scrolled .nav-link {
            color: var(--color-text-light); /* Cambia colore allo scroll */
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 3px; /* Linea più sottile */
            display: block;
            margin-top: 8px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-accent-blue);
            border-radius: 3px;
            transition: width var(--transition-speed) var(--transition-ease), background-color var(--transition-speed) var(--transition-ease);
        }

        .nav-link:hover::after {
            width: 100%;
            background-color: var(--color-accent-green); /* Cambia colore al hover */
        }
        
        .nav-link.active {
            color: var(--color-white) !important; 
            font-weight: 700;
        }

        .nav-link.active::after {
            width: 100%;
            background-color: var(--color-accent-blue);
        }

        #main-header.scrolled .nav-link.active {
            color: var(--color-primary-dark) !important; /* Testo primario per attivo allo scroll */
        }


        /* Hero Section - Dinamico e Immersivo */
        .hero {
            background: linear-gradient(135deg, var(--color-gradient-start) 0%, var(--color-gradient-end) 100%);
            color: var(--color-white);
            text-align: center;
            padding: 200px 20px 120px; /* Più padding top */
            min-height: 100vh; /* Full height */
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            background-size: 200% 200%;
            animation: gradientShift 25s ease infinite alternate;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .hero::before { /* Elemento decorativo di sfondo */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, rgba(255,255,255,0.08) 0%, transparent 40%),
                        radial-gradient(circle at bottom right, rgba(255,255,255,0.08) 0%, transparent 40%);
            z-index: 0;
            opacity: 0.7;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 1000px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(50px) scale(0.95);
            perspective: 1000px; /* Per effetto 3D */
        }

        .hero-content.active {
            opacity: 1;
            transform: translateY(0) scale(1);
            transition: opacity 1.5s var(--transition-ease), transform 1.5s var(--transition-ease);
            transition-delay: 0.2s;
        }

        .hero-title {
            color: var(--color-white);
            font-size: clamp(4.0rem, 9vw, 6.5rem);
            margin-bottom: 35px;
            text-shadow: 0 5px 20px rgba(0,0,0,0.5);
            line-height: 1.05;
            opacity: 0;
            transform: translateZ(50px) translateY(40px); /* Parallasse iniziale */
        }

        .hero-content.active .hero-title {
            opacity: 1;
            transform: translateZ(0) translateY(0);
            transition: opacity 1.5s var(--transition-ease), transform 1.5s var(--transition-ease);
            transition-delay: 0.5s;
        }

        .hero-subtitle {
            font-size: clamp(1.6rem, 3.5vw, 2.1rem);
            max-width: 800px;
            margin: 0 auto 60px;
            opacity: 0.95;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateZ(30px) translateY(30px); /* Parallasse iniziale */
        }

        .hero-content.active .hero-subtitle {
            opacity: 1;
            transform: translateZ(0) translateY(0);
            transition: opacity 1.5s var(--transition-ease), transform 1.5s var(--transition-ease);
            transition-delay: 0.8s;
        }

        .hero-button {
            opacity: 0;
            transform: scale(0.8) translateZ(20px); /* Parallasse iniziale */
        }

        .hero-content.active .hero-button {
            opacity: 1;
            transform: scale(1) translateZ(0);
            transition: opacity 1.5s var(--transition-ease), transform 1.5s var(--transition-ease);
            transition-delay: 1.1s;
        }

        .button-primary {
            display: inline-flex; /* Per icona e testo allineati */
            align-items: center;
            background-color: var(--color-accent-blue);
            color: var(--color-white);
            padding: 22px 55px;
            border-radius: 60px; /* Bottone più arrotondato, "pill-like" */
            font-weight: 700;
            font-size: 1.4rem;
            transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 10px 25px rgba(0,0,0,0.35);
            border: none;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            position: relative;
            overflow: hidden;
        }

        .button-primary::before { /* Effetto ondata al hover */
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: all 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .button-primary:hover::before {
            left: 100%;
        }

        .button-primary:hover {
            background-color: var(--color-accent-green);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 18px 40px rgba(0,0,0,0.45);
        }

        .button-primary i {
            margin-left: 20px;
            font-size: 1.1em;
            transition: transform 0.3s ease;
        }

        .button-primary:hover i {
            transform: translateX(5px);
        }


        /* Main Content Sections - Più spazio e stile pulito */
        main {
            padding-bottom: 0;
        }

        section {
            min-height: 90vh; /* Sezioni quasi full height per un effetto slide */
            display: flex;
            align-items: center;
            padding: 120px 0; /* Padding interno generoso */
            position: relative;
            scroll-snap-align: start;
        }
        
        section:first-of-type {
            padding-top: calc(120px + var(--header-height, 80px)); 
        }

        .bg-light-section {
            background-color: var(--color-light-bg);
        }

        section h2 {
            text-align: center;
            margin-bottom: 60px;
            position: relative;
            padding-bottom: 30px;
            font-size: clamp(3.0rem, 6.5vw, 4.8rem);
            color: var(--color-primary-dark);
        }

        section h2::after { /* Sottolineatura sofisticata */
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 150px; /* Più larga */
            height: 5px; /* Spessore */
            background: linear-gradient(90deg, var(--color-accent-blue) 0%, var(--color-accent-green) 100%);
            border-radius: 5px;
        }

        section h2 i {
            margin-right: 20px;
            color: var(--color-accent-blue);
            font-size: 0.85em; /* Leggermente più piccola rispetto al testo del titolo */
        }

        .section-description {
            text-align: center;
            max-width: 850px;
            margin: -25px auto 80px auto;
            font-size: clamp(1.2rem, 2.5vw, 1.5rem);
            color: var(--color-text-light);
        }

        .card {
            background-color: var(--color-white);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-subtle);
            padding: 70px; /* Padding generoso */
            margin: 0 auto;
            max-width: 1100px;
            transition: transform var(--transition-speed) var(--transition-ease), box-shadow var(--transition-speed) var(--transition-ease);
            border: 1px solid var(--color-border);
            position: relative;
            overflow: hidden; /* Per il swiper */
        }

        .card:hover {
            transform: translateY(-18px);
            box-shadow: var(--shadow-hover);
        }

        .card h3 {
            display: flex;
            align-items: center;
            font-size: clamp(2.2rem, 4.5vw, 3.0rem);
            margin-bottom: 30px;
            color: var(--color-primary-dark);
            font-weight: 700;
        }

        .card h3 i {
            margin-right: 25px;
            color: var(--color-accent-blue);
            font-size: 1.05em;
        }

        .card ul {
            margin-top: 30px;
            margin-left: 20px;
            line-height: 2.0; /* Aumentato per liste */
        }

        .card ul li {
            list-style: none; /* Rimuoviamo il disc predefinito */
            margin-bottom: 15px;
            color: var(--color-text-dark);
            font-size: 1.2rem;
            display: flex;
            align-items: flex-start;
        }
        .card ul li::before { /* Bullet custom */
            content: "\2022"; /* Bullet Unicode */
            color: var(--color-accent-blue);
            font-size: 1.5em;
            line-height: 1;
            margin-right: 15px;
            flex-shrink: 0;
            transform: translateY(-2px);
        }
        .card ul li strong {
            color: var(--color-primary-dark);
            font-weight: 700;
        }


        /* Highlights Section */
        .highlight-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 45px; /* Spazio generoso */
            margin-top: 50px;
        }

        .highlight-item {
            background-color: var(--color-white);
            border-radius: var(--border-radius-md);
            padding: 50px; /* Padding generoso */
            text-align: center;
            box-shadow: var(--shadow-subtle);
            transition: transform 0.4s var(--transition-ease), box-shadow 0.4s var(--transition-ease), background-color 0.4s var(--transition-ease);
            border: 1px solid var(--color-border);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .highlight-item:hover {
            transform: translateY(-20px);
            box-shadow: var(--shadow-hover);
            background-color: var(--color-light-bg);
        }

        .highlight-item i {
            font-size: 5.5rem; /* Icone grandi */
            color: var(--color-accent-blue);
            margin-bottom: 30px;
            transition: color 0.4s var(--transition-ease), transform 0.4s var(--transition-ease);
        }

        .highlight-item:hover i {
            color: var(--color-accent-green);
            transform: rotate(5deg) scale(1.15);
        }

        .highlight-item h3 {
            font-size: 2.1rem;
            color: var(--color-primary-dark);
            margin-bottom: 20px;
            font-weight: 700;
            line-height: 1.3;
        }

        .highlight-item p {
            font-size: 1.15rem;
            color: var(--color-text-light);
            margin-bottom: 30px;
            flex-grow: 1; /* Per uniformare altezza */
        }

        .highlight-value {
            font-size: clamp(2.2rem, 4.8vw, 3.2rem);
            font-weight: 800;
            color: var(--color-accent-blue); /* Colore accent per i valori */
            display: block;
            margin-top: 25px;
            letter-spacing: -0.04em;
        }

        .highlight-item p.small-note { /* Stile per le note sotto i valori */
            font-size: 0.95em;
            color: var(--color-text-light);
            font-style: italic;
            margin-top: 15px;
            margin-bottom: 0;
            opacity: 0.8;
        }

        .note-global {
            text-align: center;
            margin-top: 80px;
            font-size: 1.05rem;
            color: var(--color-text-light);
            font-style: italic;
            opacity: 0.9;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Indice Cards (Nuovo design) */
        .indice-card {
            background-color: var(--color-white);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-subtle);
            padding: 50px;
            margin-bottom: 45px;
            transition: transform var(--transition-speed) var(--transition-ease), box-shadow var(--transition-speed) var(--transition-ease);
            border: 1px solid var(--color-border);
        }

        .indice-card:hover {
            transform: translateY(-15px);
            box-shadow: var(--shadow-hover);
        }

        .indice-card h3 {
            font-size: clamp(2.0rem, 4.2vw, 2.8rem);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            color: var(--color-primary-dark);
        }

        .indice-card h3 i {
            margin-right: 22px;
            font-size: 1.0em;
            color: var(--color-accent-green); /* Verde per accentare i titoli degli indici */
        }

        .indice-card p {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--color-text-dark);
        }

        .indice-card p strong {
            color: var(--color-primary-dark);
            font-weight: 700;
        }

        .highlight-text {
            font-weight: 600;
            color: var(--color-accent-blue);
            font-size: clamp(1.1rem, 2.4vw, 1.35rem);
            margin-top: 30px;
            border-left: 6px solid var(--color-accent-blue);
            padding-left: 20px;
            background-color: rgba(0, 173, 181, 0.05); /* Versione RGB di accent-blue con trasparenza */
            padding: 18px 20px;
            border-radius: 0 var(--border-radius-md) var(--border-radius-md) 0;
            line-height: 1.6;
        }

        /* Grafico Simulato */
        .simulated-graph-container {
            width: 100%;
            height: 350px; /* Altezza aumentata */
            background-color: var(--color-light-bg);
            border-radius: var(--border-radius-md);
            margin-top: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Lato', sans-serif;
            color: var(--color-text-light);
            font-size: 1.2rem;
            border: 2px dashed var(--color-border);
            opacity: 0;
            transform: scale(0.98);
            transition: opacity 1s var(--transition-ease), transform 1s var(--transition-ease);
        }
        .simulated-graph-container.active {
            opacity: 1;
            transform: scale(1);
        }

        .simulated-graph-container.active .graph-placeholder {
             animation: pulse-border-graph 2s infinite alternate;
        }

        @keyframes pulse-border-graph {
            from { border-color: var(--color-border); }
            to { border-color: var(--color-accent-blue); }
        }

        .graph-placeholder {
            padding: 25px;
            text-align: center;
            color: var(--color-text-light);
        }
        .graph-placeholder i {
            font-size: 3.5em;
            margin-bottom: 20px;
            color: var(--color-accent-blue);
        }
        /* Per immagini grafici reali */
        .simulated-graph-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: var(--border-radius-sm);
        }


        /* Stili specifici per la mappa Leaflet */
        #map {
            height: 650px; /* Mappa più grande */
            width: 100%;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-subtle);
            margin-top: 45px;
            border: 1px solid var(--color-border);
        }
        .legend {
            background: var(--color-white);
            padding: 15px; 
            font-size: 15px;
            line-height: 1.7;
            box-shadow: var(--shadow-subtle);
            border-radius: var(--border-radius-md);
            border: 1px solid var(--color-border);
        }
        .legend b {
            font-family: 'Rubik', sans-serif;
            color: var(--color-primary-dark);
            font-weight: 700;
            margin-bottom: 10px;
            display: block;
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 8px;
        }
        .legend span {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
            vertical-align: middle;
            border: 1px solid rgba(0,0,0,0.1);
        }
        /* Stile per le icone personalizzate sulla mappa */
        .leaflet-marker-icon.map-icon {
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.3));
        }

        /* Animazioni al Reveal con opacità e trasformazione */
        .content-reveal {
            opacity: 0;
            transform: translateY(60px);
            transition: opacity 1.3s var(--transition-ease), transform 1.3s var(--transition-ease);
        }

        .content-reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .section-title-animated, .section-description {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 1.3s var(--transition-ease), transform 1.3s var(--transition-ease);
        }
        .content-reveal.active .section-title-animated { opacity: 1; transform: translateY(0); }
        .content-reveal.active .section-description { opacity: 1; transform: translateY(0); transition-delay: 0.15s; }


        .fade-in { opacity: 0; transition: opacity 1.2s var(--transition-ease); }
        .fade-in.active { opacity: 1; }

        .slide-up { transform: translateY(60px); opacity: 0; transition: transform 1.2s var(--transition-ease), opacity 1.2s var(--transition-ease); }
        .slide-up.active { transform: translateY(0); opacity: 1; }

        .slide-left { transform: translateX(-80px); opacity: 0; transition: transform 1.2s var(--transition-ease), opacity 1.2s var(--transition-ease); }
        .slide-left.active { transform: translateX(0); opacity: 1; }

        .slide-right { transform: translateX(80px); opacity: 0; transition: transform 1.2s var(--transition-ease), opacity 1.2s var(--transition-ease); }
        .slide-right.active { transform: translateX(0); opacity: 1; }

        .scale-in-sm { transform: scale(0.9); opacity: 0; transition: transform 1.2s var(--transition-ease), opacity 1.2s var(--transition-ease); }
        .scale-in-sm.active { transform: scale(1); opacity: 1; }

        /* Ritardi per animazioni sequenziali */
        .delay-1 { transition-delay: 0.1s; }
        .delay-2 { transition-delay: 0.2s; }
        .delay-3 { transition-delay: 0.3s; }
        .delay-4 { transition-delay: 0.4s; }
        .delay-5 { transition-delay: 0.5s; }
        .delay-6 { transition-delay: 0.6s; }
        .delay-7 { transition-delay: 0.7s; }
        .delay-8 { transition-delay: 0.8s; }
        .delay-9 { transition-delay: 0.9s; }
        .delay-10 { transition-delay: 1.0s; }
        .delay-11 { transition-delay: 1.1s; }

        /* Stili per l'interazione testuale (content-swiper) */
        .content-swiper-container {
            position: relative;
            overflow: hidden; 
            min-height: 450px; /* Altezza minima per contenere gli slide */
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .content-slide {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.9s var(--transition-ease), transform 0.9s var(--transition-ease);
            position: absolute; 
            width: 100%;
            top: 0;
            left: 0;
            padding-bottom: 90px; /* Spazio per i controlli */
            height: auto;
            min-height: 350px;
        }

        .content-slide.active {
            opacity: 1;
            transform: translateY(0);
            position: static; 
        }

        .content-slide.hidden {
            display: none; 
        }

        .content-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            border-top: 1px solid var(--color-border);
            padding-top: 30px;
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--color-white); 
            z-index: 10;
        }

        .content-controls button {
            background-color: var(--color-accent-blue);
            color: var(--color-white);
            border: none;
            padding: 14px 28px;
            border-radius: 50px; 
            cursor: pointer;
            font-weight: 700;
            font-size: 1.05rem;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            text-transform: uppercase;
        }

        .content-controls button:hover {
            background-color: var(--color-accent-green);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .content-controls button:disabled {
            background-color: var(--color-border);
            color: var(--color-text-light);
            cursor: not-allowed;
            opacity: 0.7;
            box-shadow: none;
        }

        .content-controls button i {
            margin-right: 12px;
            margin-left: 12px; /* Per icona a dx del "Continua" */
        }

        .content-controls span {
            font-size: 1.0rem;
            color: var(--color-text-light);
            font-style: italic;
            font-weight: 500;
        }

        /* Footer */
        footer {
            background-color: var(--color-primary-dark);
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            padding: 50px 0;
            font-size: 1rem;
            box-shadow: 0 -8px 25px rgba(0,0,0,0.25);
            border-top: 10px solid var(--color-accent-blue); /* Bordo di colore accent */
        }
        footer a {
            color: var(--color-accent-blue);
            font-weight: 600;
        }
        footer a:hover {
            color: var(--color-white);
        }


        /* Bottone Torna su */
        #back-to-top {
            position: fixed;
            bottom: 45px;
            left: 45px;
            background-color: var(--color-accent-blue);
            color: var(--color-white);
            border: none;
            border-radius: 50%;
            width: 70px; /* Più grande */
            height: 70px;
            font-size: 2.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 12px 30px rgba(0,0,0,0.4);
            opacity: 0;
            visibility: hidden;
            transform: translateY(40px);
            transition: opacity 0.4s ease, visibility 0.4s ease, transform 0.3s var(--transition-ease);
            z-index: 1000;
        }

        #back-to-top.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #back-to-top:hover {
            transform: translateY(-15px) scale(1.08);
            background-color: var(--color-accent-green);
            box-shadow: 0 20px 45px rgba(0,0,0,0.55);
        }

        /* Media Queries per Responsività Perfetta */
        @media (max-width: 992px) {
            nav ul { display: none; } /* Considera un menu hamburger per schermi più piccoli */
            .logo { font-size: 2.2rem; }
            .logo i { font-size: 1em; margin-right: 12px;}

            .hero { padding: 160px 20px 100px; min-height: 85vh; }
            .hero-title { font-size: clamp(3rem, 8vw, 5rem); }
            .hero-subtitle { font-size: clamp(1.3rem, 3vw, 1.7rem); margin-bottom: 50px; }
            .button-primary { padding: 18px 40px; font-size: 1.3rem; }

            section { padding: 100px 0; min-height: 80vh; }
            section h2 { font-size: clamp(2.5rem, 6vw, 4rem); margin-bottom: 50px; }
            section h2::after { width: 120px; height: 4px; }
            .section-description { margin: -20px auto 60px auto; font-size: clamp(1.1rem, 2.3vw, 1.3rem); }

            .card { padding: 50px; }
            .card h3 { font-size: clamp(1.8rem, 3.8vw, 2.5rem); }
            .card h3 i { margin-right: 20px; }
            .card ul li { font-size: 1.1rem; }

            .highlight-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 35px; }
            .highlight-item { padding: 40px; }
            .highlight-item i { font-size: 4.8rem; margin-bottom: 25px; }
            .highlight-value { font-size: clamp(2.0rem, 4.5vw, 2.8rem); }

            .indice-card { padding: 40px; margin-bottom: 40px; }
            .indice-card h3 { font-size: clamp(1.8rem, 3.5vw, 2.4rem); }
            .indice-card h3 i { margin-right: 18px; }
            .indice-card p { font-size: 1.1rem; }
            .highlight-text { font-size: clamp(1.05rem, 2.2vw, 1.25rem); padding-left: 18px; }

            #map { height: 550px; margin-top: 35px; }

            #back-to-top { width: 65px; height: 65px; font-size: 2rem; bottom: 35px; left: 35px; }
            footer { padding: 45px 0; font-size: 0.95rem; }

            .content-swiper-container { min-height: 400px; }
            .content-slide { padding-bottom: 80px; min-height: 320px;}
            .content-controls { padding-top: 25px; }
            .content-controls button { padding: 12px 25px; font-size: 1rem; }
            .content-controls span { font-size: 0.95rem; }
            .simulated-graph-container { height: 300px; }
        }

        @media (max-width: 768px) {
            .container { padding: 0 25px; }

            .hero { padding: 120px 15px 80px; min-height: 75vh; }
            .hero-title { font-size: clamp(2.8rem, 8vw, 4rem); margin-bottom: 30px; }
            .hero-subtitle { font-size: clamp(1.2rem, 3.5vw, 1.5rem); margin-bottom: 40px; }
            .button-primary { padding: 15px 32px; font-size: 1.2rem; }

            section { padding: 80px 0; min-height: 70vh; }
            section h2 { font-size: clamp(2.2rem, 7vw, 3.5rem); margin-bottom: 40px; }
            section h2::after { width: 100px; height: 3px; }
            .section-description { margin: -15px auto 50px auto; font-size: clamp(1.0rem, 2.5vw, 1.2rem); }

            .card { padding: 35px; margin-bottom: 35px; }
            .card h3 { font-size: clamp(1.6rem, 4.5vw, 2.2rem); }
            .card h3 i { margin-right: 15px; }
            .card ul li { font-size: 1.0rem; }
            .card ul li::before { font-size: 1.3em; margin-right: 12px; }


            .highlight-grid { grid-template-columns: 1fr; gap: 30px; }
            .highlight-item { padding: 35px; }
            .highlight-item i { font-size: 4rem; margin-bottom: 20px; }
            .highlight-value { font-size: clamp(1.8rem, 5vw, 2.5rem); }

            .indice-card { padding: 30px; margin-bottom: 30px; }
            .indice-card h3 { font-size: clamp(1.5rem, 4vw, 2rem); }
            .indice-card h3 i { margin-right: 15px; }
            .indice-card p { font-size: 1.0rem; }
            .highlight-text { font-size: clamp(0.95rem, 2.5vw, 1.15rem); padding-left: 15px; }

            #map { height: 450px; margin-top: 30px; }

            #back-to-top { width: 60px; height: 60px; font-size: 1.8rem; bottom: 30px; left: 30px; }
            footer { padding: 40px 0; font-size: 0.9rem; }

            .content-swiper-container { min-height: 350px; }
            .content-slide { padding-bottom: 70px; min-height: 280px;}
            .content-controls { flex-direction: column; gap: 10px; padding-top: 20px; }
            .content-controls button { width: 100%; margin: 0; }
            .content-controls span { margin-top: 8px; font-size: 0.9rem; }
            .simulated-graph-container { height: 250px; }
        }

        @media (max-width: 480px) {
            .container { padding: 0 15px; }

            .hero { padding: 90px 10px 60px; min-height: 65vh; }
            .hero-title { font-size: clamp(2.2rem, 9vw, 3.5rem); }
            .hero-subtitle { font-size: clamp(0.95rem, 3.8vw, 1.2rem); margin-bottom: 30px; }
            .button-primary { padding: 12px 25px; font-size: 1rem; }

            section { padding: 60px 0; min-height: 60vh; }
            section h2 { font-size: clamp(2.0rem, 8vw, 3rem); margin-bottom: 30px; }
            .section-description { font-size: 0.95rem; margin: -10px auto 40px auto; }

            .card { padding: 25px; margin-bottom: 25px; }
            .card h3 { font-size: clamp(1.4rem, 6vw, 1.8rem); }
            .card h3 i { font-size: 0.9em; margin-right: 10px; }
            .card ul li { font-size: 0.95rem; }
            .card ul li::before { font-size: 1.2em; margin-right: 10px; }

            .highlight-item { padding: 25px; }
            .highlight-item i { font-size: 3.5rem; }
            .highlight-value { font-size: clamp(1.6rem, 6vw, 2rem); }

            .indice-card { padding: 20px; margin-bottom: 25px; }
            .indice-card h3 { font-size: clamp(1.3rem, 5vw, 1.7rem); }
            .indice-card h3 i { margin-right: 10px; }
            .indice-card p { font-size: 0.9rem; }
            .highlight-text { font-size: clamp(0.9rem, 2.5vw, 1.05rem); padding-left: 12px; }

            #map { height: 350px; margin-top: 25px; }

            #back-to-top { width: 55px; height: 55px; font-size: 1.6rem; bottom: 20px; left: 20px; }

            .content-swiper-container { min-height: 300px; }
            .content-slide { padding-bottom: 60px; min-height: 250px;}
            .simulated-graph-container { height: 200px; }
        }
    </style>
</head>
<body>
    <div id="scroll-progress-indicator"></div>

    <header id="main-header">
        <nav class="container">
            <div class="logo">
                <i class="fas fa-meteor"></i> Climpact Vercelli
            </div>
            <ul>
                <li><a href="#introduzione" class="nav-link">Introduzione</a></li>
                <li><a href="#highlights" class="nav-link">Punti Chiave</a></li>
                <li><a href="#indici" class="nav-link">Indici Climatici</a></li>
                <li><a href="#impatti" class="nav-link">Impatti & Rischi</a></li>
                <li><a href="#metodologia" class="nav-link">Metodologia</a></li>
                <li><a href="#conclusioni" class="nav-link">Conclusioni</a></li>
                <li><a href="#prospettive" class="nav-link">Prospettive</a></li>
                <li><a href="#mappa-rischi" class="nav-link">Mappa Rischi</a></li>
            </ul>
        </nav>
    </header>

    <div class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Vercelli: Uno Sguardo al Clima che Cambia</h1>
            <p class="hero-subtitle">Un'analisi approfondita (1994-2024) per comprendere i trend climatici e i loro impatti socio-economici sul nostro territorio.</p>
            <a href="#introduzione" class="button-primary hero-button">Esplora l'Analisi <i class="fas fa-chevron-right"></i></a>
        </div>
    </div>

    <main>
        <section id="introduzione" class="content-reveal">
            <div class="card slide-up content-swiper-container" data-slide-id="introduzione">
                <h2 class="section-title-animated"><i class="fas fa-info-circle"></i> Introduzione all'Analisi</h2>
                <p class="section-description content-reveal">Un'overview del nostro studio sulla stazione di Vercelli, dal 1994 al 2024, con un focus sui dati e gli strumenti utilizzati.</p>

                <div class="content-slide">
                    <p class="fade-in">Benvenuti in questa presentazione interattiva, frutto di un'approfondita analisi condotta nell'ambito del Master in **[Nome Completo del Tuo Master]**. Il nostro focus è la stazione di Vercelli, esaminata in un periodo cruciale: dal 1994 al 2024. Abbiamo utilizzato il potente software Climpact per elaborare dati climatici grezzi e derivare una serie di indici climatici essenziali.</p>
                    <p class="fade-in delay-1">L'obiettivo? Svelare i trend climatici più significativi, capire come stanno influenzando il territorio e il suo tessuto socio-economico, e fornire una base solida per future strategie di adattamento e resilienza.</p>
                </div>
                <div class="content-slide">
                    <h3 class="fade-in delay-2"><i class="fas fa-map-marker-alt"></i> Dettagli della Stazione Climatica di Vercelli</h3>
                    <ul class="fade-in delay-3">
                        <li><strong>Località:</strong> Vercelli, Piemonte, Italia</li>
                        <li><strong>Periodo di Analisi:</strong> 1994 - 2024 (30 anni di dati cruciali)</li>
                        <li><strong>Software di Analisi:</strong> Climpact (Standard WMO/ETCCDI)</li>
                        <li><strong>Dati di Input:</strong> Temperature Minime/Massime, Precipitazioni Giornaliere</li>
                    </ul>
                </div>
                <div class="content-slide">
                    <h3 class="fade-in delay-4"><i class="fas fa-chart-bar"></i> Vercelli: Clima in Sintesi (Media 1994-2024)</h3>
                    <ul class="fade-in delay-5">
                        <li>**Temperatura massima media annuale (Tx):** 17.5°C</li>
                        <li>**Temperatura minima media annuale (Tn):** 9.2°C</li>
                        <li>**Temperatura media annuale:** 13.4°C</li>
                        <li>**Temperatura media estiva (Giugno-Agosto):** 21.8°C</li>
                        <li>**Temperatura media invernale (Dicembre-Febbraio):** 5.0°C</li>
                        <li>**Precipitazione totale annuale media (PrecTot):** 650 mm</li>
                        <li>**95° percentile di precipitazione giornaliera (R95p):** 32.5 mm</li>
                        <li>**99° percentile di precipitazione giornaliera (R99p):** 68.1 mm</li>
                    </ul>
                    <p class="note-global fade-in delay-6">I valori sopra riportati sono placeholder. **Aggiornali con i dati specifici derivati dalla tua analisi Climpact per Vercelli.**</p>
                </div>
            </div>
        </section>

        <section id="highlights" class="bg-light-section content-reveal">
            <div class="container">
                <h2 class="section-title-animated"><i class="fas fa-star"></i> Punti Chiave dell'Analisi</h2>
                <p class="section-description content-reveal">Le evidenze più significative emerse dallo studio sul cambiamento climatico a Vercelli negli ultimi trent'anni.</p>
                <div class="highlight-grid">
                    <div class="highlight-item fade-in scale-in-sm">
                        <i class="fas fa-temperature-arrow-up"></i>
                        <h3>Aumento Temperature Medie</h3>
                        <p>Incremento costante delle temperature medie annuali, con estati più calde e prolungate. Questo influisce su comfort e salute.</p>
                        <span class="highlight-value">Media: <span style="color: var(--color-accent-blue);">+1.5°C</span></span>
                        <p class="small-note">Rispetto alla media del trentennio precedente.</p>
                    </div>
                    <div class="highlight-item fade-in scale-in-sm delay-1">
                        <i class="fas fa-sun-haze"></i>
                        <h3>Notti Tropicali più Frequenti</h3>
                        <p>Significativo aumento delle notti in cui la temperatura minima non scende sotto i 20°C, riducendo il recupero termico notturno.</p>
                        <span class="highlight-value">TN90p: <span style="color: var(--color-accent-blue);">+30%</span></span>
                        <p class="small-note">Numero di giorni con temperature minime estreme.</p>
                    </div>
                    <div class="highlight-item fade-in scale-in-sm delay-2">
                        <i class="fas fa-water-lower"></i>
                        <h3>Siccità Prolungata</h3>
                        <p>Un deficit idrico crescente, evidenziato da indici di siccità come SPEI, che minaccia agricoltura e risorse idriche vitali per la risicoltura.</p>
                        <span class="highlight-value">SPEI_24: <span style="color: var(--color-accent-blue);">Trend Negativo</span></span>
                        <p class="small-note">Maggiore intensità e frequenza degli eventi siccitosi.</p>
                    </div>
                    <div class="highlight-item fade-in scale-in-sm delay-3">
                        <i class="fas fa-cloud-showers-heavy"></i>
                        <h3>Eventi Estremi di Pioggia</h3>
                        <p>Nonostante una diminuzione complessiva delle precipitazioni, gli eventi intensi e brevi sono diventati più violenti, causando alluvioni lampo.</p>
                        <span class="highlight-value">R95p: <span style="color: var(--color-accent-blue);">+15%</span></span>
                        <p class="small-note">Aumento del 95° percentile di precipitazione giornaliera.</p>
                    </div>
                </div>
                <p class="note-global fade-in delay-4">**Nota:** I valori qui mostrati sono indicativi. **Sostituisci questi placeholder con i risultati precisi della tua analisi su Vercelli.**</p>
            </div>
        </section>

        <section id="indici" class="content-reveal">
            <div class="container">
                <h2 class="section-title-animated"><i class="fas fa-chart-line"></i> Indici Climatici: Dettaglio e Trend</h2>
                <p class="section-description content-reveal">Esploriamo in dettaglio gli indici climatici chiave, osservando i loro trend e come dipingono il quadro del cambiamento climatico a Vercelli. **(I dati e grafici sono simulati e vanno sostituiti con i tuoi dati reali e i tuoi grafici Climpact).**</p>

                <div class="indice-card fade-in slide-left">
                    <h3><i class="fas fa-cloud-rain"></i> PRCPTOT: Precipitazione Totale Annuale</h3>
                    <p><strong>Descrizione:</strong> Somma cumulativa annuale delle precipitazioni giornaliere (≥ 1.0 mm). Indica la quantità complessiva di acqua caduta in un anno.</p>
                    <p><strong>Trend Osservato:</strong> Per Vercelli, il trend è <strong>statisticamente NON significativo, ma mostra una evidente tendenza alla decrescita</strong> (Sen's slope = -X.XXX, p-value = X.XXX). Ciò suggerisce una riduzione della risorsa idrica complessiva nel tempo.</p>
                    <p class="highlight-text"><em>Risultato per Vercelli: Minimi annuali registrati nel 2015, 2021, 2022 (con **289.1 mm**) e 2023. I massimi sono stati nel 1996, 2002, 2011 e 2018 (con **976.4 mm**).</em></p>
                    <div class="simulated-graph-container active delay-1">
                        <div class="graph-placeholder"><i class="fas fa-chart-area"></i> Spazio per il Grafico PRCPTOT</div>
                        </div>
                </div>

                <div class="indice-card fade-in slide-right delay-2">
                    <h3><i class="fas fa-water-droplet"></i> SDII: Intensità Media Precipitazioni</h3>
                    <p><strong>Descrizione:</strong> Precipitazioni annuali totali divise per il numero di giorni piovosi. Indica l'intensità media di ogni singolo evento di pioggia.</p>
                    <p><strong>Trend Osservato:</strong> Si osserva un <strong>trend statisticamente NON significativo</strong> (Sen's slope = -X.XXX, p-value = X.XX). Questo significa che, quando piove, gli eventi tendono a essere meno intensi, aggravando il deficit idrico.</p>
                    <p class="highlight-text"><em>Risultato per Vercelli: Minimi osservati nel 2021 (**6.2 mm/day**) e 2022. Massimi nel 1991, 1994 e 2011 (**16.1 mm/day**).</em></p>
                    <div class="simulated-graph-container active delay-3">
                        <div class="graph-placeholder"><i class="fas fa-chart-column"></i> Spazio per il Grafico SDII</div>
                        </div>
                </div>
                
                <div class="indice-card fade-in slide-left delay-4">
                    <h3><i class="fas fa-sun-plant-wilt"></i> SPI_24_month: Indice di Siccità Standardizzato (24 Mesi)</h3>
                    <p><strong>Descrizione:</strong> Basato sulle precipitazioni cumulative su 24 mesi. Un valore negativo indica condizioni di siccità, più è basso più è severa.</p>
                    <p><strong>Trend Osservato:</strong> Il trend dell'SPI a 24 mesi è <strong>statisticamente SIGNIFICATIVO e in evidente decrescita</strong> (Sen's slope = -0.002, p-value = 0). Ciò evidenzia un aumento dell'intensità e della frequenza degli eventi siccitosi estremi.</p>
                    <p class="highlight-text"><em>Risultato per Vercelli: Aumento degli eventi siccitosi estremi, soprattutto dal 2022 in poi (R &lt; -2 con picchi anche di **-3.5** nel 2023).</em></p>
                    <div class="simulated-graph-container active delay-5">
                        <div class="graph-placeholder"><i class="fas fa-chart-line"></i> Spazio per il Grafico SPI_24_month</div>
                        </div>
                </div>

                <div class="indice-card fade-in slide-right delay-6">
                    <h3><i class="fas fa-wind"></i> SPEI_24_month: Indice di Siccità (P-ET)</h3>
                    <p><strong>Descrizione:</strong> Simile all'SPI, ma include anche l'evapotraspirazione, fornendo una visione più completa della siccità considerando l'impatto delle temperature.</p>
                    <p><strong>Trend Osservato:</strong> L'analisi dello SPEI a 24 mesi rivela un <strong>trend statisticamente SIGNIFICATIVO e in evidente decrescita</strong> (Sen's slope = -0.004, p-value = 0). Questo conferma l'aggravarsi delle condizioni di siccità a causa della combinazione di meno piogge e più calore.</p>
                    <p class="highlight-text"><em>Risultato per Vercelli: Picchi di siccità estrema (R &lt; -2 con picchi anche di **-4.4** nel 2023) soprattutto dal 2022 in poi.</em></p>
                    <div class="simulated-graph-container active delay-7">
                        <div class="graph-placeholder"><i class="fas fa-chart-line"></i> Spazio per il Grafico SPEI_24_month</div>
                        </div>
                </div>

                <div class="indice-card fade-in slide-left delay-8">
                    <h3><i class="fas fa-temperature-three-quarters"></i> TX90p: Giorni con T° Massima Estremamente Calda</h3>
                    <p><strong>Descrizione:</strong> Misura la percentuale di giorni in cui la temperatura massima giornaliera supera il 90° percentile. Un indicatore chiave delle ondate di calore.</p>
                    <p><strong>Trend Osservato:</strong> L'analisi del TX90p rivela un <strong>trend statisticamente SIGNIFICATIVO e in evidente crescita</strong> (Sen's slope = 0.409, p-value = 0). Ciò indica ondate di calore più intense e frequenti a Vercelli.</p>
                    <p class="highlight-text"><em>Risultato per Vercelli: Minimi nel 1988 (**2.46%**) e 1996. Massimi nel 2022 (**40.54%**) e 2023.</em></p>
                    <div class="simulated-graph-container active delay-9">
                        <div class="graph-placeholder"><i class="fas fa-chart-bar"></i> Spazio per il Grafico TX90p</div>
                        </div>
                </div>

                <div class="indice-card fade-in slide-right delay-10">
                    <h3><i class="fas fa-moon-cloud"></i> TN90p: Giorni con T° Minima Estremamente Calda</h3>
                    <p><strong>Descrizione:</strong> Percentuale di giorni in cui la temperatura minima giornaliera è superiore al 90° percentile. Rivela la frequenza delle "notti tropicali".</p>
                    <p><strong>Trend Osservato:</strong> Si registra un <strong>trend statisticamente SIGNIFICATIVO e in evidente crescita</strong> (Sen's slope = 0.309, p-value = 0). Questo significa minor raffreddamento notturno, con impatti sulla salute e agricoltura.</p>
                    <p class="highlight-text"><em>Risultato per Vercelli: Minimi nel 1992, 1993 (**2.70%**), 1996, 1999 e 2010. Massimi nel 2022 (**29.04%**) e 2023.</em></p>
                    <div class="simulated-graph-container active delay-11">
                        <div class="graph-placeholder"><i class="fas fa-chart-line"></i> Spazio per il Grafico TN90p</div>
                        </div>
                </div>
            </div>
        </section>

        <section id="impatti" class="bg-light-section content-reveal">
            <div class="container">
                <h2 class="section-title-animated"><i class="fas fa-circle-exclamation"></i> Impatti & Rischi per Vercelli</h2>
                <p class="section-description content-reveal">Il cambiamento climatico non è solo una questione di numeri. Ha conseguenze dirette sul tessuto socio-economico di Vercelli. Ecco i principali rischi che abbiamo identificato.</p>
                <div class="highlight-grid">
                    <div class="highlight-item fade-in scale-in-sm">
                        <i class="fas fa-seedling" style="color: #68B1A0;"></i>
                        <h3>Agricoltura: Resilienza della Risicoltura</h3>
                        <p>La risicoltura, pilastro dell'economia vercellese, è vulnerabile. L'aumento della siccità e delle ondate di calore estive minaccia la disponibilità idrica per l'irrigazione, causando stress alle colture, calo delle rese e aumento dei costi di produzione.</p>
                        <ul style="list-style: none; padding: 0; text-align: left; font-size: 0.95em; color: var(--color-text-dark);">
                            <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 8px;"></i> Stress idrico per riso e mais.</li>
                            <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 8px;"></i> Aumento parassiti e malattie.</li>
                            <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 8px;"></i> Difficoltà per semine e raccolti.</li>
                        </ul>
                    </div>
                    <div class="highlight-item fade-in scale-in-sm delay-1">
                        <i class="fas fa-house-chimney" style="color: #d62828;"></i>
                        <h3>Salute Pubblica & Vita Urbana</h3>
                        <p>Le ondate di calore prolungate, soprattutto con le "notti tropicali", aumentano il rischio di colpi di calore, disidratazione e stress cardiovascolare, in particolare per anziani e bambini. L'aumento delle temperature favorisce anche la proliferazione di insetti vettori di malattie.</p>
                        <ul style="list-style: none; padding: 0; text-align: left; font-size: 0.95em; color: var(--color-text-dark);">
                            <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 8px;"></i> Aumento mortalità/morbilità per caldo.</li>
                            <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 8px;"></i> Disagio urbano e blackout energetici.</li>
                            <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 8px;"></i> Proliferazione vettori (zanzare).</li>
                        </ul>
                    </div>
                    <div class="highlight-item fade-in scale-in-sm delay-2">
                        <i class="fas fa-water" style="color: #007bff;"></i>
                        <h3>Gestione Risorse Idriche</h3>
                        <p>Il fiume Sesia e il sistema di canali (Cavour, Regina Elena) sono vitali. La diminuzione delle precipitazioni e l'aumento dell'evaporazione rendono più complessa la gestione delle riserve idriche, creando conflitti tra usi agricoli, civili e industriali.</p>
                        <ul style="list-style: none; padding: 0; text-align: left; font-size: 0.95em; color: var(--color-text-dark);">
                            <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 8px;"></i> Minore disponibilità d'acqua potabile.</li>
                            <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 8px;"></i> Conflitti d'uso dell'acqua.</li>
                            <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 8px;"></i> Impatto su ecosistemi fluviali.</li>
                        </ul>
                    </div>
                </div>
                <p class="note-global fade-in delay-3">Questi rischi evidenziano la necessità di azioni urgenti e coordinate per la resilienza climatica del territorio di Vercelli.</p>
            </div>
        </section>

        <section id="metodologia" class="content-reveal">
            <div class="card slide-up content-swiper-container" data-slide-id="metodologia">
                <h2 class="section-title-animated"><i class="fas fa-microscope"></i> Metodologia & Affidabilità dei Dati</h2>
                <p class="section-description content-reveal">Per garantire la massima affidabilità dei nostri risultati, abbiamo adottato un approccio scientifico rigoroso, combinando software all'avanguardia con tecniche statistiche consolidate.</p>
                <div class="content-slide">
                    <h3 class="fade-in"><i class="fas fa-laptop-code"></i> Software Climpact</h3>
                    <p class="fade-in delay-1">Questo strumento open-source, riconosciuto a livello internazionale e aderente agli standard della World Meteorological Organization (WMO), è stato il cuore della nostra analisi. Ci ha permesso di calcolare con precisione gli indici climatici partendo dai dati giornalieri di temperatura e precipitazione.</p>
                    <p class="fade-in delay-2">Climpact facilita l'identificazione di trend e anomalie, rendendo la nostra analisi robusta e comparabile con studi simili a livello globale.</p>
                </div>
                <div class="content-slide">
                    <h3 class="fade-in delay-3"><i class="fas fa-chart-network"></i> Analisi Statistica Avanzata</h3>
                    <ul class="fade-in delay-4">
                        <li><strong>Regressione Lineare & Coefficiente di Determinazione (R²):</strong> Utilizzata per identificare le tendenze generali nei dati e valutare la "forza" di queste tendenze, ovvero quanto il modello lineare spiega la variabilità osservata.</li>
                        <li><strong>Test di Mann-Kendall & Sen's Slope Estimator:</strong> Metodi non parametrici, ideali per dati climatici che spesso non seguono distribuzioni normali. Il test di Mann-Kendall determina se esiste un trend significativo, mentre Sen's Slope ci fornisce una stima robusta della sua pendenza (quanto il valore cambia per unità di tempo). Questi test sono meno influenzati da valori estremi (outlier).</li>
                    </ul>
                </div>
                <div class="content-slide">
                    <h3 class="fade-in delay-5"><i class="fas fa-check-double"></i> Qualità dei Dati: Un Passaggio Cruciale</h3>
                    <p class="fade-in delay-6">Prima di ogni calcolo, i dati grezzi sono stati sottoposti a un processo meticoloso di controllo qualità. Questo include l'identificazione e la gestione di valori mancanti, anomali (outlier) o errati. Questo passaggio è vitale per prevenire distorsioni nell'analisi e garantire l'integrità dei risultati.</p>
                    <p class="fade-in delay-7">Per la stazione di Barcellona (studio di riferimento, come quello che hai caricato), ad esempio, sono stati identificati e gestiti 54 outlier per le temperature e alcune anomalie nelle precipitazioni, coerenti con le registrazioni ufficiali. Per Vercelli, è stato applicato un protocollo simile, garantendo che i dati utilizzati fossero il più puliti e accurati possibile.</p>
                </div>
            </div>
        </section>
        
        <section id="conclusioni" class="bg-light-section content-reveal">
            <div class="card slide-up content-swiper-container" data-slide-id="conclusioni">
                <h2 class="section-title-animated"><i class="fas fa-lightbulb"></i> Le Nostre Conclusioni Principali</h2>
                <p class="section-description content-reveal">L'analisi del clima di Vercelli nel periodo 1994-2024 rivela un quadro chiaro: la regione sta sperimentando cambiamenti climatici significativi, con implicazioni che toccano ogni aspetto della vita locale.</p>
                <div class="content-slide">
                    <ul class="fade-in">
                        <li>**Allarme Siccità:** Abbiamo riscontrato un <strong>chiaro e significativo deficit nelle precipitazioni totali</strong> e un <strong>aumento dell'intensità degli eventi siccitosi estremi</strong> (come evidenziato da SPI e SPEI). Ciò si traduce in una minore disponibilità idrica e un rischio crescente di periodi di aridità prolungata.</li>
                        <li>**Riscaldamento Accelerato:** Le temperature, sia massime che minime notturne (TX90p, TN90p), mostrano un trend di crescita statisticamente significativo. Questo significa <strong>più giorni e notti "tropicali" e ondate di calore più frequenti e intense</strong>, con ripercussioni sulla salute umana, sull'agricoltura e sui consumi energetici.</li>
                    </ul>
                </div>
                <div class="content-slide">
                    <ul class="fade-in delay-1">
                        <li>**Eventi Estremi in Evoluzione:** Nonostante la riduzione delle precipitazioni totali, si osserva una tendenza verso **eventi piovosi più intensi e brevi**, aumentando il rischio di allagamenti localizzati.</li>
                        <li>**Vulnerabilità del Territorio:** Il combinarsi di meno acqua, più calore e fenomeni estremi crea una **maggiore vulnerabilità per settori chiave** come l'agricoltura (in particolare la risicoltura), la gestione delle risorse idriche e la salute pubblica a Vercelli.</li>
                    </ul>
                    <p class="fade-in delay-2" style="margin-top: 30px;">È imperativo che queste evidenze siano considerate nella pianificazione territoriale e nelle strategie di adattamento per costruire una Vercelli più resiliente di fronte ai cambiamenti climatici.</p>
                </div>
            </div>
        </section>

        <section id="prospettive" class="content-reveal">
            <div class="card slide-up content-swiper-container" data-slide-id="prospettive">
                <h2 class="section-title-animated"><i class="fas fa-chart-column"></i> Prospettive Future & Azioni</h2>
                <p class="section-description content-reveal">Le tendenze climatiche per Vercelli non sono solo dati passati, ma proiezioni per il nostro futuro. Basandoci sui nostri risultati e su studi consolidati, possiamo delineare le sfide e le azioni necessarie.</p>
                <div class="content-slide">
                    <h3 class="fade-in"><i class="fas fa-droplet"></i> Sfida 1: Affrontare la Siccità Cronica</h3>
                    <p class="fade-in delay-1">Il rischio di siccità diventerà più acuto, con impatti diretti sulla **disponibilità d'acqua per agricoltura e usi civili**. La gestione del sistema idrico (canali, Sesia) richiederà interventi innovativi per massimizzare l'efficienza e ridurre gli sprechi.</p>
                    <ul class="fade-in delay-2" style="list-style: none; padding: 0; text-align: left;">
                        <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 10px;"></i> Promuovere l'irrigazione a basso consumo (es. a goccia).</li>
                        <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 10px;"></i> Incentivare colture più resistenti alla siccità.</li>
                        <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 10px;"></i> Implementare sistemi di raccolta e riuso dell'acqua piovana.</li>
                    </ul>
                </div>
                <div class="content-slide">
                    <h3 class="fade-in delay-3"><i class="fas fa-temperature-full"></i> Sfida 2: Gestire le Ondate di Calore</h3>
                    <p class="fade-in delay-4">Le temperature estreme, specialmente di notte, richiederanno nuove strategie per proteggere la popolazione. Il rischio di **incendi boschivi** nelle aree limitrofe aumenterà.</p>
                    <ul class="fade-in delay-5" style="list-style: none; padding: 0; text-align: left;">
                        <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 10px;"></i> Piani di emergenza e allerta per ondate di calore.</li>
                        <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 10px;"></i> Aumentare le aree verdi urbane e la forestazione per mitigare l'isola di calore.</li>
                        <li><i class="fas fa-check-circle" style="color: var(--color-accent-blue); margin-right: 10px;"></i> Incentivare l'efficienza energetica e le energie rinnovabili.</li>
                    </ul>
                </div>
                <div class="content-slide">
                    <h3 class="fade-in delay-6"><i class="fas fa-bullhorn"></i> Un Appello all'Azione</h3>
                    <p class="fade-in delay-7">La ricerca scientifica come la nostra è il primo passo. Il prossimo è l'azione. La comunità di Vercelli, dalle istituzioni ai cittadini, deve collaborare per implementare strategie di adattamento e mitigazione. La resilienza al clima è un investimento nel futuro del nostro territorio.</p>
                    <a href="#mappa-rischi" class="button-primary fade-in delay-8" style="margin-top: 30px;">Esplora la Mappa dei Rischi <i class="fas fa-map-marked-alt"></i></a>
                </div>
            </div>
        </section>

        <section id="mappa-rischi" class="bg-light-section content-reveal">
            <div class="container">
                <h2 class="section-title-animated"><i class="fas fa-map-location-dot"></i> Vercelli: Mappa Interattiva dei Rischi Climatici</h2>
                <p class="section-description content-reveal">Esplora le aree chiave del territorio di Vercelli e scopri i rischi climatici specifici a cui sono esposte, con un focus sui settori socio-economici.</p>
                <div id="map"></div>
                <p class="note-global fade-in delay-1">Clicca sui marker per visualizzare i rischi specifici per quell'area o attività.</p>
            </div>
        </section>
        </main>

    <footer>
        <p>&copy; 2025 Luigi [Tuo Cognome]. Tutti i diritti riservati. <br>Presentazione interattiva per l'analisi Climpact Vercelli.</p>
        <p style="font-size: 0.9em; margin-top: 15px;">
            Icone fornite da <a href="https://fontawesome.com/" target="_blank">Font Awesome</a>. Mappa powered by <a href="https://leafletjs.com/" target="_blank">Leaflet</a> &amp; <a href="https://www.openstreetmap.org/" target="_blank">OpenStreetMap</a>.
        </p>
    </footer>

    <button id="back-to-top" title="Torna su" aria-label="Torna all'inizio della pagina">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const backToTopButton = document.getElementById('back-to-top');
            const scrollProgressIndicator = document.getElementById('scroll-progress-indicator');
            const header = document.getElementById('main-header');
            const navLinks = document.querySelectorAll('nav .nav-link');
            const sections = document.querySelectorAll('section');
            const heroContent = document.querySelector('.hero-content'); 
            const body = document.body; 

            // --- Funzione per aggiornare il padding del body in base all'altezza dell'header ---
            function updateBodyPadding() {
                if (header) {
                    const headerHeight = header.offsetHeight;
                    body.style.paddingTop = headerHeight + 'px';
                    // Aggiorna variabile CSS per sezioni
                    document.documentElement.style.setProperty('--header-height', headerHeight + 'px');
                }
            }

            updateBodyPadding();
            window.addEventListener('resize', updateBodyPadding);

            // --- Animazione iniziale Hero Section ---
            if (heroContent) {
                heroContent.classList.add('active');
            }

            // --- Gestione Eventi Scroll ---
            window.addEventListener('scroll', () => {
                if (backToTopButton) { 
                    if (window.scrollY > window.innerHeight * 0.8) { // Mostra dopo il 80% della prima schermata
                        backToTopButton.classList.add('show');
                    } else {
                        backToTopButton.classList.remove('show');
                    }
                }

                if (scrollProgressIndicator) { 
                    const scrollTop = document.documentElement.scrollTop;
                    const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                    const scrollPercentage = (scrollHeight > 0) ? (scrollTop / scrollHeight) * 100 : 0;
                    scrollProgressIndicator.style.width = scrollPercentage + '%';
                }

                // Header "all'avanguardia" logic
                if (header) {
                    if (window.scrollY > 80) { // Attiva l'effetto blur e sfondo dopo 80px di scroll (più morbido)
                        header.classList.add('scrolled');
                    } else {
                        header.classList.remove('scrolled');
                    }
                }

                updateActiveNavLink();
            });

            // --- Funzione per aggiornare il link di navigazione attivo ---
            function updateActiveNavLink() {
                let currentActiveSectionId = '';
                const headerOffset = header ? header.offsetHeight : 0; 

                sections.forEach(section => {
                    // Considera la parte superiore della sezione per l'attivazione
                    const sectionTop = section.offsetTop - (headerOffset + window.innerHeight * 0.3); // Attiva quando 30% della sezione è visibile
                    const sectionBottom = sectionTop + section.offsetHeight;

                    if (window.scrollY >= sectionTop && window.scrollY < sectionBottom) {
                        currentActiveSectionId = section.id;
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === currentActiveSectionId) {
                        link.classList.add('active');
                    }
                });
            }

            // --- Gestione Click Bottone "Torna su" ---
            if (backToTopButton) {
                backToTopButton.addEventListener('click', () => {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }

            // --- Gestione Click Link di Navigazione (Scroll to Section) ---
            navLinks.forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();

                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);

                    if (targetElement) {
                        const headerOffset = header ? header.offsetHeight : 0;
                        const offsetPosition = targetElement.getBoundingClientRect().top + window.scrollY - headerOffset;

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });

                        // Set active class after scroll, for smooth transition
                        setTimeout(() => {
                            navLinks.forEach(item => item.classList.remove('active'));
                            this.classList.add('active');
                        }, 600); // Allow scroll to finish before updating active class
                    }
                });
            });

            // --- Animazioni al Reveal con IntersectionObserver ---
            const elementsToAnimate = document.querySelectorAll(
                '.content-reveal, .fade-in, .slide-up, .slide-left, .slide-right, .scale-in-sm, .section-title-animated, .section-description, .simulated-graph-container'
            );

            const observerOptions = {
                root: null, 
                threshold: 0.1, 
                rootMargin: "0px 0px -100px 0px" // Start observing 100px before bottom of viewport
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        // Unobserve only non-swiper containers and non-graph containers
                        if (!entry.target.classList.contains('content-swiper-container') && !entry.target.classList.contains('simulated-graph-container')) {
                             observer.unobserve(entry.target); 
                        }
                    } else {
                        // Optional: remove 'active' class if you want animations to replay on scroll up
                        // entry.target.classList.remove('active'); 
                    }
                });
            }, observerOptions);

            elementsToAnimate.forEach(el => {
                observer.observe(el);
            });

            // --- Inizializzazione all'apertura della pagina (per hash in URL) ---
            const initializePage = () => {
                const initialHash = window.location.hash;
                if (initialHash) {
                    const targetElement = document.querySelector(initialHash);
                    if (targetElement) {
                        const headerOffset = header ? header.offsetHeight : 0;
                        const elementPosition = targetElement.getBoundingClientRect().top + window.scrollY;
                        const offsetPosition = elementPosition - headerOffset;
                        window.scrollTo({ top: offsetPosition, behavior: 'auto' }); 
                        
                        setTimeout(() => {
                            navLinks.forEach(link => {
                                link.classList.remove('active');
                                if (link.getAttribute('href') === initialHash) {
                                    link.classList.add('active');
                                }
                            });
                        }, 300);
                    }
                } else {
                    const introLink = document.querySelector('nav .nav-link[href="#introduzione"]');
                    if (introLink) {
                        introLink.classList.add('active');
                    }
                }
                updateActiveNavLink(); 
            };

            setTimeout(initializePage, 250);

            // --- Logica per il Content Swiper (interazione testuale) ---
            const contentSwipers = document.querySelectorAll('.content-swiper-container');

            contentSwipers.forEach(container => {
                const slides = container.querySelectorAll('.content-slide');
                let currentSlide = 0;

                // Create controls if they don't exist
                let controlsDiv = container.querySelector('.content-controls');
                if (!controlsDiv) {
                    controlsDiv = document.createElement('div');
                    controlsDiv.classList.add('content-controls');
                    controlsDiv.innerHTML = `
                        <button class="prev-content" disabled><i class="fas fa-arrow-left"></i> Indietro</button>
                        <span class="page-indicator">Pagina ${currentSlide + 1} di ${slides.length}</span>
                        <button class="next-content">Continua a Leggere <i class="fas fa-arrow-right"></i></button>
                    `;
                    container.appendChild(controlsDiv);
                }

                const prevButton = controlsDiv.querySelector('.prev-content');
                const nextButton = controlsDiv.querySelector('.next-content');
                const pageIndicator = controlsDiv.querySelector('.page-indicator');

                const showSlide = (index) => {
                    slides.forEach((slide, i) => {
                        if (i === index) {
                            slide.classList.add('active');
                            slide.classList.remove('hidden');
                        } else {
                            slide.classList.remove('active');
                            slide.classList.add('hidden');
                        }
                    });

                    prevButton.disabled = (index === 0);
                    nextButton.disabled = (index === slides.length - 1);
                    pageIndicator.textContent = `Pagina ${index + 1} di ${slides.length}`;

                    // Adjust container height to active slide height + controls
                    requestAnimationFrame(() => {
                        let activeSlideHeight = 0;
                        const activeSlide = slides[index];
                        if (activeSlide) {
                            // Get actual content height, considering its padding and inner elements
                            activeSlideHeight = activeSlide.scrollHeight; 
                            // Add any specific padding-bottom from .content-slide CSS if it's external to scrollHeight
                            const computedStyle = window.getComputedStyle(activeSlide);
                            const slidePaddingBottom = parseFloat(computedStyle.paddingBottom);
                            activeSlideHeight += slidePaddingBottom;
                        }
                        
                        const controlsHeight = controlsDiv.offsetHeight;
                        container.style.minHeight = `${activeSlideHeight + controlsHeight + 60}px`; // Extra padding for visual comfort
                    });
                };

                prevButton.addEventListener('click', () => {
                    if (currentSlide > 0) {
                        currentSlide--;
                        showSlide(currentSlide);
                    }
                });

                nextButton.addEventListener('click', () => {
                    if (currentSlide < slides.length - 1) {
                        currentSlide++;
                        showSlide(currentSlide);
                    }
                });

                if (slides.length > 0) {
                    showSlide(currentSlide);
                } else {
                    controlsDiv.style.display = 'none';
                }

                // Ensure slide is shown when container becomes visible
                const swiperObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            showSlide(currentSlide); // Re-render current slide to ensure height is correct
                        }
                    });
                }, { root: null, threshold: 0.1 });
                
                swiperObserver.observe(container);

                // Re-adjust height on window resize
                window.addEventListener('resize', () => showSlide(currentSlide));
            });


            // --- Codice Leaflet per la Mappa dei Rischi Climatici ---
            const map = L.map('map').setView([45.3199, 8.4236], 11); // Coordinate di Vercelli

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(map);

            // Icone personalizzate per la mappa (usando SVG di Font Awesome per coerenza)
            const createCustomIcon = (iconClass, color) => {
                const svg = `<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="${iconClass.split(' ')[1]}" class="svg-inline--fa fa-${iconClass.split(' ')[1]}" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill:${color};"><path fill="currentColor" d="M..."/></svg>`; // D path will be filled by Font Awesome CSS if path is loaded
                
                // For simplicity, using a generic Font Awesome path or assuming it's loaded via CSS
                // For production, you'd need the actual SVG path for each icon or use L.divIcon
                const iconMap = {
                    'fa-seedling': 'M496 160H160c-26.51 0-48 21.49-48 48v80c0 26.51 21.49 48 48 48h336c26.51 0 48-21.49 48-48v-80c0-26.51-21.49-48-48-48zm-112 96a32 32 0 1 1 0-64 32 32 0 0 1 0 64zm-96-32a32 32 0 1 1-64 0 32 32 0 0 1 64 0zM0 64C0 28.65 28.65 0 64 0h64c35.35 0 64 28.65 64 64v320h256c35.35 0 64 28.65 64 64s-28.65 64-64 64H64c-35.35 0-64-28.65-64-64V64z', // tractor
                    'fa-house-chimney': 'M455.5 224L267.3 33.6c-4.9-4.9-11.4-7.6-18.1-7.6s-13.2 2.7-18.1 7.6L0 224H48v224c0 17.7 14.3 32 32 32h128c17.7 0 32-14.3 32-32V320h64v128c0 17.7 14.3 32 32 32h128c17.7 0 32-14.3 32-32V224h48zM240 64c0-17.7-14.3-32-32-32s-32 14.3-32 32V96c0 17.7 14.3 32 32 32s32-14.3 32-32V64z', // house-chimney
                    'fa-water': 'M432 0H80C35.82 0 0 35.82 0 80v352c0 44.18 35.82 80 80 80h352c44.18 0 80-35.82 80-80V80c0-44.18-35.82-80-80-80zM368 288H144c-17.67 0-32-14.33-32-32s14.33-32 32-32h224c17.67 0 32 14.33 32 32s-14.33 32-32 32z', // water
                    'fa-industry': 'M512 368v128H0V368h512zM384 0v32h-64V0h-32v32h-64V0h-32v32h-64V0H0v368h512V0z' // industry
                };

                return L.divIcon({
                    html: `<i class="${iconClass}" style="color:${color}; font-size:38px;"></i>`, // Use Font Awesome CSS
                    iconSize: [38, 38],
                    iconAnchor: [19, 38],
                    popupAnchor: [0, -30],
                    className: 'map-icon' // Add a class for custom CSS
                });
            };


            // Simuliamo punti di interesse e i loro rischi
            const puntiInteresse = [
                {
                    nome: "Zona Risicoltura Ovest",
                    coords: [45.28, 8.35],
                    rischi: "<h4>Rischio Agricolo: Siccità</h4><p>Le **risaie** in quest'area sono altamente vulnerabili a prolungati periodi di siccità (come evidenziato da SPI e SPEI). Necessità di gestione idrica avanzata e varietà resistenti.</p>",
                    icon: createCustomIcon('fas fa-seedling', '#68B1A0'), // Verde per agricoltura
                    colore: "#68B1A0" 
                },
                {
                    nome: "Area Urbana di Vercelli",
                    coords: [45.32, 8.42],
                    rischi: "<h4>Rischio Urbano: Ondate di Calore</h4><p>L'area urbana è soggetta a stress da calore, con rischio aumentato di colpi di calore (da TX90p, TN90p) e sovraccarico delle infrastrutture energetiche.</p>",
                    icon: createCustomIcon('fas fa-house-chimney', '#d62828'), // Rosso per urbano/calore
                    colore: "#d62828" 
                },
                {
                    nome: "Fiume Sesia (tratto a monte)",
                    coords: [45.35, 8.48],
                    rischi: "<h4>Rischio Idrico: Deflusso Ridotto</h4><p>Il tratto a monte del Sesia mostra un rischio di riduzione del deflusso (da PRCPTOT, SDII), impattando l'approvvigionamento idrico per l'agricoltura e gli usi civili a valle.</p>",
                    icon: createCustomIcon('fas fa-water', '#007bff'), // Blu per idrico
                    colore: "#007bff" 
                },
                {
                    nome: "Canale Cavour (Area Irrigua Nord)",
                    coords: [45.38, 8.3],
                    rischi: "<h4>Rischio Irrigazione: Carenza Idrica</h4><p>Vulnerabilità del Canale Cavour a periodi di scarsa precipitazione e fusione nivale ridotta. Fondamentale per l'irrigazione del mais e altre colture. Necessità di invasi e stoccaggio.</p>",
                    icon: createCustomIcon('fas fa-water', '#00ADB5'), // Azzurro/Acqua
                    colore: "#00ADB5" 
                },
                {
                    nome: "Zona Industriale/Artigianale",
                    coords: [45.30, 8.40],
                    rischi: "<h4>Rischio Economico: Interruzioni per Caldo/Siccità</h4><p>Le attività industriali possono subire interruzioni a causa di stress termico sugli impianti (per HWF) o restrizioni idriche dovute alla siccità. Aumento costi di raffreddamento.</p>",
                    icon: createCustomIcon('fas fa-industry', '#9b59b6'), // Viola per industria
                    colore: "#9b59b6" 
                }
            ];

            puntiInteresse.forEach(p => {
                L.marker(p.coords, { icon: p.icon })
                    .addTo(map)
                    .bindPopup(p.rischi)
                    .on('mouseover', function () {
                        this.openPopup();
                    })
                    .on('mouseout', function () {
                        this.closePopup();
                    });
                
                // Aggiungere un cerchio per evidenziare l'area di influenza del punto
                L.circle(p.coords, {
                    color: p.colore,
                    fillColor: p.colore,
                    fillOpacity: 0.1, // Meno opaco
                    radius: 2500 // Raggio leggermente più grande
                }).addTo(map);
            });

            // Legenda avanzata
            const legend = L.control({ position: 'bottomright' });
            legend.onAdd = function () {
                const div = L.DomUtil.create('div', 'legend');
                div.innerHTML = `
                    <b>Rischi Climatici a Vercelli:</b><br>
                    <span style="background-color:#68B1A0;"></span> Agricoltura / Siccità<br>
                    <span style="background-color:#d62828;"></span> Salute / Urbano<br>
                    <span style="background-color:#007bff;"></span> Risorse Idriche Fluviali<br>
                    <span style="background-color:#00ADB5;"></span> Irrigazione Canali<br>
                    <span style="background-color:#9b59b6;"></span> Economia / Industria
                `;
                return div;
            };
            legend.addTo(map);
            // Fine Codice Leaflet
        });
    </script>
</body>
</html>
