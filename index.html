<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analisi Climatica - Vercelli</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <style>
    :root {
      --main-color: #2F4F4F; /* Dark Slate Gray - Professional, grounded */
      --accent-color: #669999; /* Cadet Blue - Sophisticated contrast */
      --light-gray: #F5F5F5; /* White Smoke - Clean background */
      --warning-color: #DAA520; /* Goldenrod - Earthy warning */
      --danger-color: #B22222; /* Firebrick - Strong alert */
      --success-color: #2E8B57; /* Sea Green - Natural positive */
    }
    body {
      margin: 0;
      font-family: 'Open Sans', sans-serif; /* More professional font */
      background-color: var(--light-gray);
      color: #333;
    }
    header {
      background: var(--main-color);
      color: white;
      padding: 30px 0; /* More padding for a grander feel */
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* Stronger shadow */
    }
    header h1 {
      font-size: 2.8em; /* Larger heading */
      margin-bottom: 10px;
    }
    header p {
      font-size: 1.2em;
      opacity: 0.9;
    }
    nav {
      background: #364B4B; /* Slightly darker than main-color */
      display: flex;
      justify-content: center;
      padding: 15px 0;
      flex-wrap: wrap;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    nav a {
      color: white;
      margin: 0 20px; /* More spacing */
      text-decoration: none;
      font-weight: 600; /* Slightly bolder */
      padding: 8px 0;
      transition: color 0.3s ease, text-decoration 0.3s ease;
    }
    nav a:hover {
      color: var(--accent-color); /* Highlight with accent color */
      text-decoration: underline;
    }
    #map {
      height: 65vh; /* Taller map */
      width: 100%;
      margin-bottom: 40px;
      border-bottom: 5px solid var(--accent-color); /* Subtle design element */
    }
    .content {
      padding: 40px; /* More padding */
      max-width: 1100px; /* Wider content area */
      margin: auto;
    }
    h2 {
      color: var(--main-color);
      border-bottom: 3px solid var(--accent-color); /* Thicker border */
      padding-bottom: 10px;
      margin-top: 50px; /* More top margin */
      font-size: 2em; /* Larger headings */
      display: flex;
      align-items: center;
      gap: 10px;
    }
    h2 i {
      color: var(--accent-color);
    }
    .info-box, .info-block, .interactive-section { /* Renamed info-box-socio to info-block for consistency */
      background: white;
      padding: 30px; /* More padding */
      border-radius: 10px; /* More rounded corners */
      margin-bottom: 40px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1); /* Stronger shadow */
      overflow: hidden;
      border-top: 5px solid var(--accent-color); /* New border element */
    }
    .info-box ul, .info-block ul {
      padding-left: 20px;
      list-style: none;
      margin-top: 20px;
    }
    .info-box ul li {
      margin-bottom: 12px; /* More spacing between list items */
      line-height: 1.7em;
      display: flex;
      align-items: flex-start;
    }
    .info-box ul li strong {
      color: var(--main-color);
    }
    .info-box ul li .show-graph-link {
        font-size: 0.95em;
        margin-left: 15px;
        color: var(--accent-color);
        cursor: pointer;
        text-decoration: underline;
        font-weight: bold;
        transition: color 0.3s ease;
    }
    .info-box ul li .show-graph-link:hover {
        color: var(--main-color);
    }
    .info-box i {
      margin-right: 10px;
      color: var(--accent-color);
      font-size: 1.2em; /* Larger icons */
    }
    .info-block { /* Styling for the renamed socio-economic impact section */
      background: #F8F8F8; /* Lighter background for distinction */
      border-top: 5px solid var(--warning-color); /* Warning color for this section */
    }
    .info-block h2 {
        border-bottom-color: var(--warning-color);
        color: var(--main-color);
    }
    .info-block .impact-description {
      font-size: 1.1em;
      line-height: 1.8em;
      margin-bottom: 30px;
      color: #555;
    }

    /* New styles for impact categories - replacing cards */
    .impact-category-list {
        display: flex;
        flex-direction: column;
        gap: 25px; /* Spacing between new impact blocks */
    }
    .impact-item {
        background: white;
        padding: 25px;
        border-left: 6px solid var(--warning-color); /* Default */
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .impact-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 15px rgba(0,0,0,0.12);
    }
    .impact-item h3 {
        display: flex;
        align-items: center;
        margin-top: 0;
        margin-bottom: 15px;
        font-size: 1.5em;
        color: var(--main-color);
    }
    .impact-item h3 i {
        margin-right: 12px;
        font-size: 1.8em;
        color: var(--warning-color); /* Default icon color */
    }
    .impact-item p {
        line-height: 1.7em;
        color: #555;
        margin-bottom: 0;
    }
    /* Severity indicators for impact items */
    .impact-item.severity-low { border-left-color: var(--success-color); }
    .impact-item.severity-low h3 i { color: var(--success-color); }

    .impact-item.severity-medium { border-left-color: var(--warning-color); }
    .impact-item.severity-medium h3 i { color: var(--warning-color); }

    .impact-item.severity-high { border-left-color: var(--danger-color); }
    .impact-item.severity-high h3 i { color: var(--danger-color); }


    .chart {
      margin: 35px auto;
      text-align: center;
    }
    footer {
      background: var(--main-color);
      color: white;
      text-align: center;
      padding: 15px;
      font-size: 1em;
      margin-top: 50px;
    }
    /* Hidden section to hold graph data */
    .graph-data-container {
        display: none;
    }
    .graph-data-container img {
        max-width: 100%;
        height: auto;
    }
    .graph-data-container .graph-commentary {
        margin-top: 15px;
        font-size: 1.05em;
        line-height: 1.7em;
        color: #666;
        text-align: left;
    }
    /* Modal (Lightbox) Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      padding-top: 60px;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgb(0,0,0);
      background-color: rgba(0,0,0,0.9);
    }
    
    .modal-body-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: flex-start;
      gap: 30px; /* More space */
      margin: auto;
      width: 90%;
      max-width: 1300px; /* Wider modal */
      background-color: white;
      padding: 40px; /* More padding */
      border-radius: 12px; /* More rounded */
      box-shadow: 0 6px 20px rgba(0,0,0,0.35); /* Stronger shadow */
      animation-name: zoom;
      animation-duration: 0.6s;
    }
    .modal-body-container img#img01 {
      flex: 1 1 50%; /* Image takes slightly more space */
      max-width: 100%;
      height: auto;
      object-fit: contain;
      min-width: 350px; /* Larger min-width */
    }
    .modal-body-container #caption {
      flex: 1 1 40%; /* Caption takes less space */
      margin: 0;
      padding: 0;
      text-align: left;
      color: #333;
      font-size: 1.15em; /* Slightly larger text */
      line-height: 1.7;
      min-width: 350px; /* Larger min-width */
    }
    
    @keyframes zoom {
      from {transform:scale(0)}
      to {transform:scale(1)}
    }
    .close-button {
      position: absolute;
      top: 20px; /* More from top */
      right: 40px; /* More from right */
      color: #f1f1f1;
      font-size: 45px; /* Larger close button */
      font-weight: bold;
      transition: 0.3s;
    }
    .close-button:hover,
    .close-button:focus {
      color: #bbb;
      text-decoration: none;
      cursor: pointer;
    }
    @media only screen and (max-width: 768px){
      .modal-body-container {
        flex-direction: column;
        align-items: center;
        width: 95%;
        padding: 25px;
      }
      .modal-body-container img#img01,
      .modal-body-container #caption {
        flex: none;
        width: 100%;
        min-width: unset;
      }
    }
    /* Interactive Section Styles */
    .interactive-section {
      background: #E8F5E9; /* Very light green for interactive section */
      border-top: 5px solid var(--success-color); /* Green border */
      padding: 35px;
      margin-top: 40px;
    }
    .interactive-section h2 {
      color: var(--main-color);
      border-bottom-color: var(--success-color); /* Green border for heading */
    }
    .interactive-controls {
      display: flex;
      flex-direction: column;
      gap: 25px; /* More spacing */
      margin-bottom: 35px;
    }
    .control-group {
      display: flex;
      flex-direction: column;
    }
    .control-group label {
      font-weight: bold;
      margin-bottom: 12px;
      color: var(--main-color);
      font-size: 1.1em;
    }
    .control-group input[type="range"] {
      width: 100%;
      -webkit-appearance: none;
      height: 10px; /* Thicker track */
      background: #ddd;
      border-radius: 50px;
      outline: none;
      opacity: 0.9; /* More opaque */
      transition: opacity .2s;
    }
    .control-group input[type="range"]:hover {
      opacity: 1;
    }
    .control-group input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 28px; /* Larger thumb */
      height: 28px;
      background: var(--accent-color);
      border-radius: 50%;
      cursor: pointer;
      border: 4px solid white; /* Thicker border */
      box-shadow: 0 0 10px rgba(0,0,0,0.4); /* Stronger shadow */
    }
    .control-group input[type="range"]::-moz-range-thumb {
      width: 28px;
      height: 28px;
      background: var(--accent-color);
      border-radius: 50%;
      cursor: pointer;
      border: 4px solid white;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
    }
    .control-value {
      text-align: center;
      font-weight: bold;
      color: var(--accent-color);
      margin-top: 8px; /* More margin */
      font-size: 1.2em; /* Larger */
    }
    .impact-results {
      background: white;
      padding: 30px; /* More padding */
      border-radius: 10px;
      box-shadow: inset 0 0 12px rgba(0,0,0,0.07); /* More pronounced inset shadow */
      margin-top: 30px;
    }
    .impact-results h3 {
      color: var(--main-color);
      margin-bottom: 20px;
      font-size: 1.4em;
    }
    .impact-category {
      margin-bottom: 25px;
      border-left: 5px solid; /* For colored stripe */
      padding-left: 15px; /* Space for stripe */
    }
    .impact-category h4 {
      color: var(--warning-color);
      margin-bottom: 12px;
      font-size: 1.2em;
      display: flex;
      align-items: center;
    }
    .impact-category h4 i {
        margin-right: 12px;
        font-size: 1.4em;
    }
    .impact-category p {
      line-height: 1.7em;
      color: #555;
    }
    .impact-category.positive { border-left-color: var(--success-color); }
    .impact-category.positive h4 { color: var(--success-color); }
    .impact-category.positive h4 i { color: var(--success-color); }

    .impact-category.warning { border-left-color: var(--warning-color); }
    .impact-category.warning h4 { color: var(--warning-color); }
    .impact-category.warning h4 i { color: var(--warning-color); }

    .impact-category.negative { border-left-color: var(--danger-color); }
    .impact-category.negative h4 { color: var(--danger-color); }
    .impact-category.negative h4 i { color: var(--danger-color); }

    /* Simulator Trend Visualizer */
    #trend-visualizer {
        width: 100%;
        height: 220px; /* Taller visualizer */
        background-image: url('https://via.placeholder.com/800x220/e0e0e0/555555?text=Simulazione+Andamento+Climatico');
        background-size: cover;
        background-position: center;
        border-radius: 10px;
        margin-top: 25px;
        margin-bottom: 35px;
        transition: filter 0.5s ease-out;
        filter: brightness(1) contrast(1);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* Stronger shadow */
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fff;
        font-size: 1.8em; /* Larger text */
        font-weight: bold;
        text-shadow: 2px 2px 5px rgba(0,0,0,0.6); /* More pronounced shadow */
    }
    /* Responsive adjustments */
    @media (max-width: 768px) {
      nav {
        flex-direction: column;
        align-items: center;
      }
      nav a {
        margin: 8px 0;
      }
      .content {
        padding: 20px;
      }
      h2 {
        font-size: 1.8em;
      }
      .info-box, .info-block, .interactive-section {
        padding: 20px;
      }
      .interactive-controls {
        flex-direction: column;
      }
      /* Removed impacts-grid styles as it's no longer used */
    }
  </style>
</head>
<body>
  <header>
    <h1>Analisi Climatica e Impatti Socio-Economici - Vercelli</h1>
    <p>Uno sguardo integrato ai cambiamenti climatici sul territorio vercellese</p>
  </header>
  <nav>
    <a href="#minime">Temperature Minime</a>
    <a href="#massime">Temperature Massime</a>
    <a href="#precipitazioni">Precipitazioni</a>
    <a href="#impatto">Impatti Socio-Economici</a>
    <a href="#simulatore">Simulatore di Impatto</a>
  </nav>
  <div id="map"></div>
  <div class="content">
    <div id="minime" class="info-box">
      <h2><i class="fas fa-chart-bar"></i> Temperature Minime</h2>
      <ul>
        <li>
          <i class="fas fa-temperature-low"></i> <strong>TR</strong> – Le notti tropicali (Tmin > 20°C) sono in forte aumento. Questo fenomeno riduce il raffrescamento notturno, aumentando consumi energetici e stress termico sia per l'uomo che per le colture.
          <span class="show-graph-link" data-graph-id="tr_ANN">Mostra grafico</span>
        </li>
        <li>
          <i class="fas fa-snowflake"></i> <strong>TN10p</strong> – La riduzione delle notti molto fredde (10° percentile) implica meno gelate, ma anche meno controllo naturale di parassiti, con conseguenze per la salute delle colture.
          <span class="show-graph-link" data-graph-id="tn10p_ANN">Mostra grafico</span>
        </li>
        <li>
          <i class="fas fa-moon"></i> <strong>TN90p</strong> – L’incremento delle notti estremamente calde altera i ritmi fisiologici delle colture, anticipa le fasi vegetative e aumenta il consumo idrico.
          <span class="show-graph-link" data-graph-id="tn90p_ANN">Mostra grafico</span>
        </li>
      </ul>
    </div>
    <div id="massime" class="info-box">
      <h2><i class="fas fa-fire"></i> Temperature Massime</h2>
      <ul>
        <li>
          <i class="fas fa-sun"></i> <strong>TX90p</strong> – I giorni con Tmax > 90° percentile sono in crescita costante. Questo peggiora la vivibilità estiva e aumenta i costi per la climatizzazione e irrigazione.
          <span class="show-graph-link" data-graph-id="tx90p_ANN">Mostra grafico</span>
        </li>
        <li>
          <i class="fas fa-burn"></i> <strong>HWF</strong> – Più eventi di ondate di calore: impatti sanitari e produttivi su tutta la comunità, con effetti cumulativi che amplificano il danno.
          <span class="show-graph-link" data-graph-id="hwf_tx90_ANN">Mostra grafico</span>
        </li>
        <li>
          <i class="fas fa-burn"></i> <strong>HWN</strong> – Più lunghi eventi di ondate di calore: impatti sanitari e produttivi su tutta la comunità, con effetti cumulativi che amplificano il danno.
          <span class="show-graph-link" data-graph-id="hwn_tx90_ANN">Mostra grafico</span>
        </li>
        <li>
          <i class="fas fa-thermometer-full"></i> <strong>TXGE30</strong> – L’aumento dei giorni oltre i 30°C crea condizioni di caldo continuo che compromettono le fasi critiche di crescita agricola.
          <span class="show-graph-link" data-graph-id="txge30_ANN">Mostra grafico</span>
        </li>
      </ul>
    </div>
    <div id="precipitazioni" class="info-box">
      <h2><i class="fas fa-cloud-showers-heavy"></i> Precipitazioni</h2>
      <ul>
        <li>
          <i class="fas fa-cloud-sun-rain"></i> <strong>CDD</strong> – I periodi consecutivi senza pioggia superano spesso i 30 giorni: questo indebolisce la resilienza idrica delle colture e aumenta il rischio di perdite nel riso.
          <span class="show-graph-link" data-graph-id="cdd_ANN">Mostra grafico</span>
        </li>
        <li>
          <i class="fas fa-water"></i> <strong>PRCPTOT</strong> – Il totale annuale resta stabile, ma la distribuzione è più irregolare e meno utile all’agricoltura.
          <span class="show-graph-link" data-graph-id="prcptot_ANN">Mostra grafico</span>
        </li>
        <li>
          <i class="fas fa-cloud-showers-heavy"></i> <strong>R95p</strong> – Le piogge intense e concentrate causano allagamenti, erosione e inefficienza nella ricarica idrica dei terreni agricoli.
          <span class="show-graph-link" data-graph-id="r95p_ANN">Mostra grafico</span>
        </li>
      </ul>
    </div>
    <div id="impatto" class="info-block">
      <h2><i class="fas fa-globe-americas"></i> Impatti sul Tessuto Socio-Economico</h2>
      <p class="impact-description">Il cambiamento climatico sta già alterando in modo tangibile l’equilibrio socio-economico del vercellese, in particolare per un’economia agricola fortemente specializzata. Gli scenari futuri indicano una crescente urgenza nell'adottare strategie di mitigazione e adattamento per preservare la qualità della vita e la prosperità economica del territorio.</p>
      <div class="impact-category-list">
        <div class="impact-item severity-high">
          <h3><i class="fas fa-hand-holding-water"></i> Costi Irrigui e Stress Idrico</h3>
          <p>L'aumento dei periodi di siccità e la maggiore irregolarità delle precipitazioni incrementano drasticamente la domanda di irrigazione, con conseguente innalzamento dei costi e pressione sulle risorse idriche. I dati sugli indici climatici mostrano un aumento significativo dei **Giorni Secchi Consecutivi (CDD)** e una distribuzione anomala delle precipitazioni totali (**PRCPTOT**), con eventi estremi (**R95p**) che non permettono una ricarica efficace delle falde. Questo scenario costringe gli agricoltori vercellesi, in particolare quelli legati alla coltivazione del riso, ad affrontare spese maggiori per l'approvvigionamento e la gestione dell'acqua, riducendo i margini di profitto e rendendo l'attività più precaria. La dipendenza da fonti idriche stabili e la competizione per l'acqua potrebbero diventare criticità maggiori.</p>
        </div>
        <div class="impact-item severity-high">
          <h3><i class="fas fa-user-injured"></i> Rischi Sanitari e Disagio Urbano</h3>
          <p>L'intensificarsi delle ondate di calore e delle notti tropicali rappresenta una seria minaccia per la salute pubblica e il benessere dei cittadini. L'incremento delle **Notti Tropicali (TR)**, dei giorni con **Temperature Massime estreme (TX90p)** e della **Frequenza/Durata delle Ondate di Calore (HWF/HWN)**, come evidenziato dai grafici, impedisce il recupero fisiologico durante le ore notturne. Questo porta a un aumento di colpi di calore, disidratazione e aggravamento di patologie cardiovascolari e respiratorie, specialmente tra anziani, bambini e lavoratori all'aperto. Le "isole di calore urbane" amplificano il problema, mettendo sotto pressione i servizi sanitari locali.</p>
        </div>
        <div class="impact-item severity-medium">
          <h3><i class="fas fa-handshake-slash"></i> Vulnerabilità Economica Agricola</h3>
          <p>Le piccole e medie imprese agricole faticano ad adattarsi ai rapidi cambiamenti climatici, compromettendo la loro sostenibilità economica e competitività. La minor frequenza di notti fredde (**TN10p**) altera il ciclo di vita dei parassiti, mentre le temperature costantemente elevate (**TXGE30**) e le notti calde (**TN90p**) stressano le colture durante le fasi critiche di crescita. Queste condizioni richiedono investimenti significativi in nuove tecnologie agricole, varietà resilienti e strategie di gestione integrate che spesso superano le capacità finanziarie delle piccole aziende. Ciò può portare a una riduzione della redditività, all'indebitamento e, nei casi peggiori, alla chiusura delle attività, con ripercussioni negative sull'occupazione e sul PIL locale.</p>
        </div>
        <div class="impact-item severity-medium">
          <h3><i class="fas fa-chart-line"></i> Competitività e Sicurezza Alimentare</h3>
          <p>La riduzione delle rese e l'alterazione dei cicli colturali minacciano la competitività dei prodotti agricoli di Vercelli e la sicurezza alimentare locale. L'instabilità delle precipitazioni e le temperature estreme influenzano direttamente la quantità e la qualità dei raccolti. Ad esempio, periodi di siccità prolungata (**CDD**) possono compromettere la germinazione del riso, mentre piogge torrenziali (**R95p**) possono causare allettamento e danni fisici alle colture mature. Questi fattori si traducono in minori volumi di produzione, standard qualitativi inferiori e costi di recupero maggiori, rendendo i prodotti vercellesi meno attrattivi sui mercati nazionali e internazionali e potenzialmente compromettendo l'autosufficienza alimentare locale.</p>
        </div>
        <div class="impact-item severity-medium">
          <h3><i class="fas fa-city"></i> Pianificazione Territoriale e Infrastrutture</h3>
          <p>La crescente frequenza di eventi climatici estremi impone una revisione urgente delle strategie di pianificazione urbana e rurale e degli investimenti infrastrutturali. L'aumento delle piogge intense (**R95p**) richiede sistemi di drenaggio più efficienti e nuove strategie per la gestione del rischio idrogeologico, inclusa la manutenzione di argini e canali. Le ondate di calore più intense e prolungate (**HWF/HWN**) sollecitano la necessità di "infrastrutture verdi" (parchi, alberi, tetti verdi) nelle aree urbane per mitigare l'effetto isola di calore. La pianificazione deve considerare la resilienza di strade, edifici e reti di servizio, implicando investimenti significativi e un approccio integrato tra settori.</p>
        </div>
      </div>
      <div class="chart">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Climate_change_graph_%282020%29.png/600px-Climate_change_graph_%282020%29.png" alt="Grafico cambiamento climatico globale" width="90%">
        <p style="font-size: 0.9em; color: #666;">Fonte: Wikimedia Commons – Andamento globale delle temperature medie (dal 1880 al 2020)</p>
      </div>
    </div>
    <div id="simulatore" class="interactive-section">
      <h2><i class="fas fa-globe"></i> Simulatore di Impatto Climatico su Vercelli</h2>
      <p>Esplora come diversi scenari climatici potrebbero influenzare il territorio di Vercelli. Muovi i cursori per vedere gli impatti stimati su diversi settori. Questo simulatore fornisce un'indicazione basata su modelli semplificati e non sostituisce analisi climatiche approfondite.</p>
      <div class="interactive-controls">
        <div class="control-group">
          <label for="temp-slider">Aumento Temperatura Media Annuale (°C): <span id="temp-value">0.0</span></label>
          <input type="range" id="temp-slider" min="0" max="4" step="0.5" value="0">
        </div>
        <div class="control-group">
          <label for="precip-slider">Variazione Precipitazioni Annue Totali (%): <span id="precip-value">0</span></label>
          <input type="range" id="precip-slider" min="-30" max="30" step="5" value="0">
        </div>
      </div>
      <div id="trend-visualizer">
        <p>Visualizzazione Andamento Stimato</p>
      </div>
      <div class="impact-results">
        <h3>Impatti Stimati sul Futuro di Vercelli:</h3>
        <div class="impact-category" id="impact-people">
          <h4><i class="fas fa-users"></i> Impatto sulle Persone e la Salute</h4>
          <p>Seleziona i parametri per visualizzare l'impatto.</p>
        </div>
        <div class="impact-category" id="impact-agriculture">
          <h4><i class="fas fa-seedling"></i> Impatto sul Settore Agricolo e l'Ambiente</h4>
          <p>Seleziona i parametri per visualizzare l'impatto.</p>
        </div>
        <div class="impact-category" id="impact-economy">
          <h4><i class="fas fa-chart-line"></i> Impatto Economico e Sociale</h4>
          <p>Seleziona i parametri per visualizzare l'impatto.</p>
        </div>
      </div>
    </div>
  </div>
  <footer>
    Progetto realizzato per analisi territoriale climatica | Master 2025 - Vercelli
  </footer>
  <button onclick="scrollToTop()" style="position: fixed; bottom: 20px; left: 20px; padding: 12px 18px; background-color: var(--accent-color); color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 3px 8px rgba(0,0,0,0.3); font-size: 18px; transition: background-color 0.3s ease;">
     ⬆  Torna su
  </button>
  <div id="imageModal" class="modal">
    <span class="close-button">&times;</span>
    <div class="modal-body-container">
        <img id="img01" />
        <div id="caption"></div>
    </div>
  </div>
  <div class="graph-data-container" id="graph-tr_ANN">
    <img src="Vercelli_94_24_tr_ANN.png" alt="Grafico TR - Notti Tropicali">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_tr_ANN.png" mostra l'andamento annuale del numero di notti tropicali (TR), definite come notti in cui la temperatura minima non scende sotto i 20°C. Si osserva un chiaro trend di aumento nel periodo 1994-2024. Questo incremento indica una riduzione del raffrescamento notturno, con implicazioni per il benessere umano (disturbi del sonno, aumento dello stress termico) e per l'agricoltura (stress termico per le colture che non riescono a recuperare durante la notte). Il trend è statisticamente significativo, evidenziando un riscaldamento delle minime estive.</p>
  </div>
  <div class="graph-data-container" id="graph-tn10p_ANN">
    <img src="Vercelli_94_24_tn10p_ANN.png" alt="Grafico TN10p - Notti Fredde">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_tn10p_ANN.png" illustra la frequenza annuale dei giorni con temperatura minima inferiore al 10° percentile (notti fredde). Si evidenzia una tendenza alla diminuzione di queste notti nel corso degli anni. Questo fenomeno implica una riduzione delle gelate, il che può essere positivo per alcune colture sensibili al gelo, ma può anche favorire la sopravvivenza e la proliferazione di parassiti e patogeni che normalmente sarebbero controllati dalle basse temperature invernali, richiedendo nuove strategie di difesa fitosanitaria.</p>
  </div>
  <div class="graph-data-container" id="graph-tn90p_ANN">
    <img src="Vercelli_94_24_tn90p_ANN" alt="Grafico TN90p - Notti Calde Estive">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_tn90p_ANN.png" rappresenta l'andamento annuale delle notti estremamente calde (Tmin > 90° percentile). Si osserva una tendenza all'aumento di questi eventi. Notti calde persistenti stressano sia la popolazione che le colture, alterando i ritmi fisiologici, anticipando le fasi vegetative e aumentando il consumo idrico delle piante, con ripercussioni negative sulla produttività agricola e sul comfort termico.</p>
  </div>
  <div class="graph-data-container" id="graph-tx90p_ANN">
    <img src="Vercelli_94_24_tx90p_ANN.png" alt="Grafico TX90p - Giorni Caldi Estremi">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_tx90p_ANN.png" mostra l'andamento annuale dei giorni con temperatura massima superiore al 90° percentile (giorni caldi estremi). Il grafico indica un aumento significativo di questi giorni nel periodo analizzato. Questo trend contribuisce al peggioramento della vivibilità estiva, all'incremento dei costi energetici per la climatizzazione e alla maggiore domanda di irrigazione in agricoltura, con stress termico per persone e animali.</p>
  </div>
  <div class="graph-data-container" id="graph-hwf_tx90_ANN">
    <img src="Vercelli_94_24_hwf_tx90_ANN.png" alt="Grafico HWF-Tx90 - Frequenza Ondate di Calore">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_hwf_tx90_ANN.png" illustra la frequenza annuale delle ondate di calore, definite in base alla persistenza di temperature massime elevate (superiori al 90° percentile per almeno 6 giorni consecutivi). Il grafico evidenzia un aumento nella frequenza di questi eventi. Ciò implica che Vercelli è soggetta a un numero crescente di periodi con caldo intenso e prolungato, aumentando i rischi per la salute pubblica, la produttività lavorativa e il consumo di risorse.</p>
  </div>
  <div class="graph-data-container" id="graph-hwn_tx90_ANN">
    <img src="Vercelli_94_24_hwn_tx90_ANN.png" alt="Grafico HWN-Tx90 - Durata Ondate di Calore">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_hwn_tx90_ANN.png" rappresenta la durata media annuale delle ondate di calore. Similmente alla frequenza, si osserva una tendenza all'aumento della durata di questi eventi. Ondate di calore più lunghe amplificano gli impatti negativi su salute, agricoltura ed ecosistemi, non permettendo un adeguato recupero e incrementando il danno cumulativo.</p>
  </div>
  <div class="graph-data-container" id="graph-txge30_ANN">
    <img src="Vercelli_94_24_txge30_ANN.png" alt="Grafico TXGE30 - Giorni oltre 30°C">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_txge30_ANN.png" mostra il numero annuale di giorni in cui la temperatura massima supera i 30°C. Il grafico indica un chiaro trend di aumento di tali giorni. Questo significa che Vercelli sperimenta periodi più lunghi e intensi di caldo estivo, compromettendo le fasi critiche di crescita agricola, aumentando lo stress idrico e il fabbisogno energetico per il raffrescamento.</p>
  </div>
  <div class="graph-data-container" id="graph-cdd_ANN">
    <img src="Vercelli_94_24_cdd_ANN.png" alt="Grafico CDD - Giorni Secchi Consecutivi">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_cdd_ANN.png" rappresenta la durata massima annuale dei giorni secchi consecutivi (CDD), ovvero i giorni senza precipitazioni significative. Si osserva una tendenza all'aumento di questi periodi. Questo prolungamento delle siccità indebolisce la resilienza idrica delle colture, in particolare del riso che richiede molta acqua, e aumenta il rischio di perdite significative, richiedendo maggiori interventi irrigui e una gestione più accurata delle risorse idriche.</p>
  </div>
  <div class="graph-data-container" id="graph-prcptot_ANN">
    <img src="Vercelli_94_24_prcptot_ANN.png" alt="Grafico PRCPTOT - Precipitazioni Totali Annuali">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_prcptot_ANN.png" mostra l'andamento annuale delle precipitazioni totali. Il grafico indica che, sebbene il quantitativo totale annuo possa rimanere relativamente stabile o mostrare lievi variazioni, la problematica principale risiede nella sua distribuzione. Spesso, le precipitazioni sono concentrate in eventi intensi e brevi, rendendole meno efficaci per la ricarica delle falde acquifere e più propense a causare ruscellamento superficiale, piuttosto che essere distribuite in modo uniforme e utile all'agricoltura.</p>
  </div>
  <div class="graph-data-container" id="graph-r95p_ANN">
    <img src="Vercelli_94_24_r95p_ANN.png" alt="Grafico R95p - Precipitazioni Estreme">
    <p class="graph-commentary">Il grafico "Vercelli_94_24_r95p_ANN.png" illustra il contributo delle precipitazioni estreme (superiori al 95° percentile) al totale annuo. Si nota una tendenza all'aumento degli eventi di pioggia intensa e concentrata. Questo fenomeno aumenta il rischio di allagamenti, erosione del suolo e inefficienza nella ricarica idrica dei terreni agricoli, poiché l'acqua scorre via rapidamente invece di essere assorbita, causando danni alle infrastrutture e alle colture.</p>
  </div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([45.32, 8.42], 10);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
    const layers = [
      {
        name: "Zona Risaie",
        coords: [45.25, 8.52],
        descrizione: "Area vulnerabile alla siccità estiva (CDD) e alla gestione idrica complessa."
      },
      {
        name: "Area Urbana di Vercelli",
        coords: [45.32, 8.42],
        descrizione: "Popolazione esposta all'effetto isola di calore e ai picchi termici prolungati."
      },
      {
        name: "Zona Mais e Frumento",
        coords: [45.35, 8.30],
        descrizione: "A rischio di squilibri termici in primavera e piogge estreme dannose."
      }
    ];
    layers.forEach(zona => {
      L.circle(zona.coords, {
        color: '#B22222', /* Danger color for map markers */
        fillColor: '#B22222',
        fillOpacity: 0.6,
        radius: 4000
      }).addTo(map).bindPopup(`<b>${zona.name}</b><br>${zona.descrizione}`);
    });
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    // Lightbox functionality
    const modal = document.getElementById("imageModal");
    const modalImg = document.getElementById("img01");
    const captionText = document.getElementById("caption");
    const closeButton = document.getElementsByClassName("close-button")[0];
    document.querySelectorAll('.show-graph-link').forEach(link => {
      link.addEventListener('click', function(event){
        event.stopPropagation();
        const graphId = this.getAttribute('data-graph-id');
        const graphContainer = document.getElementById('graph-' + graphId);
        
        if (graphContainer) {
            const img = graphContainer.querySelector('img');
            const commentary = graphContainer.querySelector('.graph-commentary');
            modal.style.display = "block";
            modalImg.src = img.src;
            captionText.innerHTML = `<strong>${img.alt}</strong><br>${commentary.innerHTML}`;
        }
      });
    });
    closeButton.onclick = function() {
      modal.style.display = "none";
    }
    modal.addEventListener('click', function(event) {
      if (event.target === modal) {
        modal.style.display = "none";
      }
    });

    // Interactive Impact Simulator
    const tempSlider = document.getElementById('temp-slider');
    const tempValueSpan = document.getElementById('temp-value');
    const precipSlider = document.getElementById('precip-slider');
    const precipValueSpan = document.getElementById('precip-value');
    const impactPeople = document.getElementById('impact-people');
    const impactAgriculture = document.getElementById('impact-agriculture');
    const impactEconomy = document.getElementById('impact-economy');
    const trendVisualizer = document.getElementById('trend-visualizer');

    function updateImpacts() {
      const tempChange = parseFloat(tempSlider.value);
      const precipChange = parseInt(precipSlider.value);
      tempValueSpan.textContent = tempChange.toFixed(1);
      precipValueSpan.textContent = precipChange;

      // Update trend visualizer
      let filterValue = '';
      let visualizerText = 'Andamento Stimato';
      if (tempChange > 2 || precipChange < -15) { // High warming or severe drought
        filterValue = `brightness(1.3) contrast(1.2) saturate(1.5) hue-rotate(340deg)`;
        visualizerText = 'Trend Critico';
      } else if (tempChange > 0.5 || precipChange !== 0) { // Moderate changes
        filterValue = `brightness(1.1) contrast(1.1) saturate(1.2) hue-rotate(10deg)`;
        visualizerText = 'Trend Moderato';
      } else { // Minimal changes
        filterValue = `brightness(1) contrast(1) saturate(1) hue-rotate(0deg)`;
        visualizerText = 'Trend Stabile';
      }
      trendVisualizer.style.filter = filterValue;
      trendVisualizer.querySelector('p').textContent = visualizerText;

      // Reset classes
      impactPeople.className = 'impact-category';
      impactAgriculture.className = 'impact-category';
      impactEconomy.className = 'impact-category';

      // Impact on People
      let peopleImpactText = "";
      if (tempChange < 0.5 && precipChange >= -5 && precipChange <= 5) {
        peopleImpactText = "In uno scenario di cambiamenti minimi, l'impatto sulla salute pubblica rimane gestibile, con condizioni di benessere simili a quelle attuali, sebbene con attenzione alle fasce più sensibili.";
        impactPeople.classList.add('positive');
      } else if (tempChange >= 0.5 && tempChange < 2) {
        peopleImpactText = "L'aumento delle temperature medie e la maggiore frequenza di ondate di calore (legate a TR, TX90p) porta a un moderato stress termico. Aumentano i disagi estivi e i rischi per la salute delle categorie vulnerabili, richiedendo un potenziamento dei servizi di supporto.";
        impactPeople.classList.add('warning');
      } else { // tempChange >= 2
        peopleImpactText = "Un aumento significativo delle temperature e ondate di calore prolungate (HWF/HWN) causano un elevato stress termico e un forte incremento di patologie correlate al calore. La qualità della vita urbana diminuisce e i sistemi sanitari sono messi a dura prova, con impatti estesi su tutta la popolazione.";
        impactPeople.classList.add('negative');
      }
      impactPeople.querySelector('p').textContent = peopleImpactText;

      // Impact on Agriculture
      let agricultureImpactText = "";
      if (tempChange < 0.5 && precipChange >= -5 && precipChange <= 5) {
        agricultureImpactText = "Le condizioni climatiche rimangono favorevoli all'agricoltura locale, con rese stabili e costi di gestione idrica contenuti. Potrebbero essere necessarie solo lievi modifiche alle pratiche agricole.";
        agricultureImpactText += " <br> (Collegato a indici come CDD, R95p, TXGE30)";
        impactAgriculture.classList.add('positive');
      } else if ((tempChange >= 0.5 && tempChange < 1.5) || (precipChange < -5 && precipChange >= -15) || (precipChange > 5 && precipChange <= 15)) {
        agricultureImpactText = "L'aumento dei periodi di siccità (CDD) o le precipitazioni più intense (R95p) mettono a rischio le colture tipiche come il riso e il mais. Richiede maggiori investimenti in sistemi di irrigazione efficienti e l'introduzione di varietà più resilienti, con costi operativi in aumento e potenziale impatto sulle rese.";
        agricultureImpactText += " <br> (Collegato a indici come CDD, R95p, TXGE30)";
        impactAgriculture.classList.add('warning');
      } else { // tempChange >= 1.5 or precipChange < -15 or precipChange > 15
        agricultureImpactText = "Scenario critico: ondate di calore prolungate (TXGE30), siccità estreme e piogge torrenziali causano gravi perdite di raccolto e danni infrastrutturali. L'agricoltura vercellese subisce un forte stress, con costi esorbitanti e la necessità di una radicale riconversione o abbandono di alcune produzioni.";
        agricultureImpactText += " <br> (Collegato a indici come CDD, R95p, TXGE30)";
        impactAgriculture.classList.add('negative');
      }
      impactAgriculture.querySelector('p').innerHTML = agricultureImpactText;

      // Impact on Economy
      let economyImpactText = "";
      if (tempChange < 0.5 && precipChange >= -5 && precipChange <= 5) {
        economyImpactText = "L'economia locale mantiene la sua resilienza, con impatti climatici minimi che non alterano significativamente i settori chiave. Potrebbero emergere opportunità legate a investimenti in sostenibilità.";
        economyImpactText += " <br> (Collegato a scenari globali di resilienza economica)";
        impactEconomy.classList.add('positive');
      } else if ((tempChange >= 0.5 && tempChange < 1.5) || (Math.abs(precipChange) > 5 && Math.abs(precipChange) <= 15)) {
        economyImpactText = "Costi crescenti per l'adattamento in agricoltura e infrastrutture. L'aumento dei costi energetici per il raffrescamento e i potenziali danni da eventi estremi (R95p) impongono una maggiore spesa pubblica e privata, con un impatto moderato sulla crescita economica locale.";
        economyImpactText += " <br> (Collegato a R95p, costi di adattamento)";
        impactEconomy.classList.add('warning');
      } else { // tempChange >= 1.5 or Math.abs(precipChange) > 15
        economyImpactText = "Rischio economico elevato. La diminuzione della produttività agricola, i costi sanitari elevati e i danni estesi alle infrastrutture causano significative perdite economiche. La competitività del territorio è compromessa e si verifica una potenziale perdita di posti di lavoro, influenzando negativamente il benessere sociale.";
        economyImpactText += " <br> (Collegato a impatti agricoli e sanitari amplificati)";
        impactEconomy.classList.add('negative');
      }
      impactEconomy.querySelector('p').innerHTML = economyImpactText;
    }
    tempSlider.addEventListener('input', updateImpacts);
    precipSlider.addEventListener('input', updateImpacts);
    // Initial update when the page loads
    updateImpacts();
  </script>
</body>
</html>
